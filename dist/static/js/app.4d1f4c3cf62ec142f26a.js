webpackJsonp([3],{"/KGs":function(t,e){},"/kga":function(t,e,i){"use strict";function a(t){i("7zGH")}var n=i("JkZY"),s=(n.a,Boolean,String,String,Number,String,String,Boolean,Object,Boolean,{mixins:[n.a],name:"x-dialog",model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},maskZIndex:[String,Number],dialogTransition:{type:String,default:"vux-dialog"},dialogClass:{type:String,default:"weui-dialog"},hideOnBlur:Boolean,dialogStyle:Object,scroll:{type:Boolean,default:!0,validator:function(t){return!0}}},computed:{maskStyle:function(){if(void 0!==this.maskZIndex)return{zIndex:this.maskZIndex}}},mounted:function(){"undefined"!=typeof window&&window.VUX_CONFIG&&"VIEW_BOX"===window.VUX_CONFIG.$layout&&(this.layout="VIEW_BOX")},watch:{show:function(t){this.$emit("update:show",t),this.$emit(t?"on-show":"on-hide"),t?this.addModalClassName():this.removeModalClassName()}},methods:{shouldPreventScroll:function(){var t=/iPad|iPhone|iPod/i.test(window.navigator.userAgent),e=this.$el.querySelector("input")||this.$el.querySelector("textarea");if(t&&e)return!0},hide:function(){this.hideOnBlur&&(this.$emit("update:show",!1),this.$emit("change",!1),this.$emit("on-click-mask"))}},data:function(){return{layout:""}}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-x-dialog",class:{"vux-x-dialog-absolute":"VIEW_BOX"===t.layout}},[i("transition",{attrs:{name:t.maskTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-mask",style:t.maskStyle,on:{click:t.hide}})]),t._v(" "),i("transition",{attrs:{name:t.dialogTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],class:t.dialogClass,style:t.dialogStyle},[t._t("default")],2)])],1)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},"0q+O":function(t,e){},"0xDb":function(t,e,i){"use strict";var a=i("mtWM"),n=i.n(a),s={dataURLtoBlob:function(t){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],a=atob(e[1]),n=a.length,s=new Uint8Array(n);n--;)s[n]=a.charCodeAt(n);return new Blob([s],{type:i})},deletaUserData:function(){window.localStorage.removeItem("token"),window.localStorage.removeItem("user"),window.location.href="/"},post:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=this;n.a.post(t,e).then(function(t){200===t.data.code?i(t.data):5009===t.data.code?s.deletaUserData():(console.log(t.data.code+":"+t.data.message),null!==a?a.show({title:"提示",content:t.data.code+":"+t.data.message,showCancelButton:!1}):alert(t.data.code+":"+t.data.message))}).catch(function(t){console.log(t)}).finally()},get:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=this;n.a.get(t).then(function(t){200===t.data.code?e(t.data):5009===t.data.code?a.deletaUserData():(console.log(t.data.code+":"+t.data.message),null!==i&&i.show({title:"提示",content:t.data.code+":"+t.data.message,showCancelButton:!1}))}).catch(function(t){console.log(t)}).finally()}};e.a=s},"1DHf":function(t,e,i){"use strict";function a(t){i("QX3Y")}var n=i("kbG3"),s=i("0FxO"),o=i("2IIR"),r=i("wmxo"),l=i("vLYD"),c=(n.a,Object(o.a)(),{name:"cell",components:{InlineDesc:n.a},props:Object(o.a)(),created:function(){},beforeMount:function(){this.hasTitleSlot=!!this.$slots.title,this.$slots.value},computed:{labelStyles:function(){return Object(r.a)({width:Object(l.a)(this,"labelWidth"),textAlign:Object(l.a)(this,"labelAlign"),marginRight:Object(l.a)(this,"labelMarginRight")})},valueClass:function(){return{"vux-cell-primary":"content"===this.primary||"left"===this.valueAlign,"vux-cell-align-left":"left"===this.valueAlign,"vux-cell-arrow-transition":!!this.arrowDirection,"vux-cell-arrow-up":"up"===this.arrowDirection,"vux-cell-arrow-down":"down"===this.arrowDirection}},labelClass:function(){return{"vux-cell-justify":this.$parent&&("justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign)}},style:function(){if(this.alignItems)return{alignItems:this.alignItems}}},methods:{onClick:function(){!this.disabled&&Object(s.a)(this.link,this.$router)}},data:function(){return{hasTitleSlot:!0,hasMounted:!1}}}),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-cell",class:{"vux-tap-active":t.isLink||!!t.link,"weui-cell_access":t.isLink||!!t.link,"vux-cell-no-border-intent":!t.borderIntent,"vux-cell-disabled":t.disabled},style:t.style,on:{click:t.onClick}},[i("div",{staticClass:"weui-cell__hd"},[t._t("icon")],2),t._v(" "),i("div",{staticClass:"vux-cell-bd",class:{"vux-cell-primary":"title"===t.primary&&"left"!==t.valueAlign}},[i("p",[t.title||t.hasTitleSlot?i("label",{staticClass:"vux-label",class:t.labelClass,style:t.labelStyles},[t._t("title",[t._v(t._s(t.title))])],2):t._e(),t._v(" "),t._t("after-title")],2),t._v(" "),i("inline-desc",[t._t("inline-desc",[t._v(t._s(t.inlineDesc))])],2)],1),t._v(" "),i("div",{staticClass:"weui-cell__ft",class:t.valueClass},[t._t("value"),t._v(" "),t._t("default",[t._v(t._s(t.value))]),t._v(" "),t.isLoading?i("i",{staticClass:"weui-loading"}):t._e()],2),t._v(" "),t._t("child")],2)},d=[],h={render:u,staticRenderFns:d},p=h,m=i("VU/8"),f=a,v=m(c,p,!1,f,null,null);e.a=v.exports},"2lnh":function(t,e){},"2sLL":function(t,e,i){"use strict";function a(t){i("RMDY")}var n=i("0FxO"),s=(Boolean,Boolean,Boolean,String,String,Boolean,String,Object,Array,{name:"x-button",props:{type:{default:"default"},disabled:Boolean,mini:Boolean,plain:Boolean,text:String,actionType:String,showLoading:Boolean,link:[String,Object],gradients:{type:Array,validator:function(t){return 2===t.length}}},methods:{onClick:function(){!this.disabled&&Object(n.a)(this.link,this.$router)}},computed:{noBorder:function(){return Array.isArray(this.gradients)},buttonStyle:function(){if(this.gradients)return{background:"linear-gradient(90deg, "+this.gradients[0]+", "+this.gradients[1]+")",color:"#FFFFFF"}},classes:function(){return[{"weui-btn_disabled":!this.plain&&this.disabled,"weui-btn_plain-disabled":this.plain&&this.disabled,"weui-btn_mini":this.mini,"vux-x-button-no-border":this.noBorder},this.plain?"":"weui-btn_"+this.type,this.plain?"weui-btn_plain-"+this.type:"",this.showLoading?"weui-btn_loading":""]}}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"weui-btn",class:t.classes,style:t.buttonStyle,attrs:{disabled:t.disabled,type:t.actionType},on:{click:t.onClick}},[t.showLoading?i("i",{staticClass:"weui-loading"}):t._e(),t._v(" "),t._t("default",[t._v(t._s(t.text))])],2)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},"32ER":function(t,e,i){"use strict";function a(t){i("KXcw")}var n=i("0FxO"),s=(Boolean,String,Object,Boolean,Boolean,String,{name:"cell-box",props:{isLink:Boolean,link:[String,Object],borderIntent:{type:Boolean,default:!0},noFlex:Boolean,alignItems:String},computed:{style:function(){if(this.alignItems)return{"align-items":this.alignItems}},className:function(){return{"vux-tap-active":this.isLink||!!this.link,"weui-cell_access":this.isLink||!!this.link,"vux-cell-no-border-intent":!this.borderIntent}}},methods:{onClick:function(){this.link&&Object(n.a)(this.link,this.$router)}}}),o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-cell-box weui-cell",class:t.className,style:t.style,on:{click:t.onClick}},[t._t("default")],2)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},"3Lt7":function(t,e,i){"use strict";var a=["-moz-box-","-webkit-box-",""],n=(Number,String,Number,String,["-moz-box-","-webkit-box-",""]),s={name:"flexbox-item",props:{span:[Number,String],order:[Number,String]},beforeMount:function(){this.bodyWidth=document.documentElement.offsetWidth},methods:{buildWidth:function(t){return"number"==typeof t?t<1?t:t/12:"string"==typeof t?t.replace("px","")/this.bodyWidth:void 0}},computed:{style:function(){var t={},e="horizontal"===this.$parent.orient?"marginLeft":"marginTop";if(1*this.$parent.gutter!=0&&(t[e]=this.$parent.gutter+"px"),this.span)for(var i=0;i<n.length;i++)t[n[i]+"flex"]="0 0 "+100*this.buildWidth(this.span)+"%";return void 0!==this.order&&(t.order=this.order),t}},data:function(){return{bodyWidth:0}}},o=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox-item",style:t.style},[t._t("default")],2)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=u(s,c,!1,null,null,null);e.a=d.exports},"3iZP":function(t,e){},"3k2l":function(t,e){},"4/Wm":function(t,e){},"4EIw":function(t,e){},"55wj":function(t,e){},"62KO":function(t,e,i){"use strict";function a(t){i("nnSp")}var n=i("/kga"),s=(n.a,Boolean,Boolean,String,String,Boolean,String,String,String,String,Number,String,String,String,Boolean,Object,Boolean,String,Boolean,Boolean,{name:"confirm",components:{XDialog:n.a},props:{value:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},theme:{type:String,default:"ios"},hideOnBlur:{type:Boolean,default:!1},title:String,confirmText:String,cancelText:String,maskTransition:{type:String,default:"vux-fade"},maskZIndex:[Number,String],dialogTransition:{type:String,default:"vux-dialog"},content:String,closeOnConfirm:{type:Boolean,default:!0},inputAttrs:Object,showContent:{type:Boolean,default:!0},confirmType:{type:String,default:"primary"},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0}},created:function(){this.showValue=this.show,this.value&&(this.showValue=this.value)},watch:{value:function(t){this.showValue=t},showValue:function(t){var e=this;this.$emit("input",t),t&&(this.showInput&&(this.msg="",setTimeout(function(){e.$refs.input&&e.setInputFocus()},300)),this.$emit("on-show"))}},data:function(){return{msg:"",showValue:!1}},methods:{getInputAttrs:function(){return this.inputAttrs||{type:"text"}},setInputValue:function(t){this.msg=t},setInputFocus:function(t){t&&t.preventDefault(),this.$refs.input.focus()},_onConfirm:function(){this.showValue&&(this.closeOnConfirm&&(this.showValue=!1),this.$emit("on-confirm",this.msg))},_onCancel:function(){this.showValue&&(this.showValue=!1,this.$emit("on-cancel"))}}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-confirm"},[i("x-dialog",{attrs:{"dialog-class":"android"===t.theme?"weui-dialog weui-skin_android":"weui-dialog","mask-transition":t.maskTransition,"dialog-transition":"android"===t.theme?"vux-fade":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){return t.$emit("on-hide")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[t.title?i("div",{staticClass:"weui-dialog__hd",class:{"with-no-content":!t.showContent}},[i("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showContent?[t.showInput?i("div",{staticClass:"vux-prompt"},["checkbox"===t.getInputAttrs().type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.msg)?t._i(t.msg,null)>-1:t.msg},on:{touchend:t.setInputFocus,change:function(e){var i=t.msg,a=e.target,n=!!a.checked;if(Array.isArray(i)){var s=t._i(i,null);a.checked?s<0&&(t.msg=i.concat([null])):s>-1&&(t.msg=i.slice(0,s).concat(i.slice(s+1)))}else t.msg=n}}},"input",t.getInputAttrs(),!1)):"radio"===t.getInputAttrs().type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.msg,null)},on:{touchend:t.setInputFocus,change:function(e){t.msg=null}}},"input",t.getInputAttrs(),!1)):i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:t.getInputAttrs().type},domProps:{value:t.msg},on:{touchend:t.setInputFocus,input:function(e){e.target.composing||(t.msg=e.target.value)}}},"input",t.getInputAttrs(),!1))]):i("div",{staticClass:"weui-dialog__bd"},[t._t("default",[i("div",{domProps:{innerHTML:t._s(t.content)}})])],2)]:t._e(),t._v(" "),i("div",{staticClass:"weui-dialog__ft"},[t.showCancelButton?i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t._onCancel}},[t._v(t._s(t.cancelText||"取消"))]):t._e(),t._v(" "),t.showConfirmButton?i("a",{staticClass:"weui-dialog__btn",class:"weui-dialog__btn_"+t.confirmType,attrs:{href:"javascript:;"},on:{click:t._onConfirm}},[t._v(t._s(t.confirmText||"确定"))]):t._e()])],2)],1)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},"71Ht":function(t,e){},"78BN":function(t,e){},"7zGH":function(t,e){},"94nV":function(t,e){},"9p9P":function(t,e){},ABCa:function(t,e,i){"use strict";function a(t){i("owug")}var n=i("BEQ0"),s=i.n(n),o=(Object,String,String,Object,{name:"x-header",props:{leftOptions:Object,title:String,transition:String,rightOptions:{type:Object,default:function(){return{showMore:!1}}}},beforeMount:function(){this.$slots["overwrite-title"]&&(this.shouldOverWriteTitle=!0)},computed:{_leftOptions:function(){return s()({showBack:!0,preventGoBack:!1},this.leftOptions||{})}},methods:{onClickBack:function(){this._leftOptions.preventGoBack?this.$emit("on-click-back"):this.$router?this.$router.back():window.history.back()}},data:function(){return{shouldOverWriteTitle:!1}}}),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-header"},[i("div",{staticClass:"vux-header-left"},[t._t("overwrite-left",[i("transition",{attrs:{name:t.transition}},[i("a",{directives:[{name:"show",rawName:"v-show",value:t._leftOptions.showBack,expression:"_leftOptions.showBack"}],staticClass:"vux-header-back",on:{click:[function(e){if("keyCode"in e&&t._k(e.keyCode,"preventDefault",void 0,e.key,void 0))return null},t.onClickBack]}},[t._v(t._s(void 0===t._leftOptions.backText?"返回":t._leftOptions.backText))])]),t._v(" "),i("transition",{attrs:{name:t.transition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t._leftOptions.showBack,expression:"_leftOptions.showBack"}],staticClass:"left-arrow",on:{click:t.onClickBack}})])]),t._v(" "),t._t("left")],2),t._v(" "),t.shouldOverWriteTitle?t._e():i("h1",{staticClass:"vux-header-title",on:{click:function(e){return t.$emit("on-click-title")}}},[t._t("default",[i("transition",{attrs:{name:t.transition}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.title,expression:"title"}]},[t._v(t._s(t.title))])])])],2),t._v(" "),t.shouldOverWriteTitle?i("div",{staticClass:"vux-header-title-area"},[t._t("overwrite-title")],2):t._e(),t._v(" "),i("div",{staticClass:"vux-header-right"},[t.rightOptions.showMore?i("a",{staticClass:"vux-header-more",on:{click:[function(e){if("keyCode"in e&&t._k(e.keyCode,"preventDefault",void 0,e.key,void 0))return null},function(e){return t.$emit("on-click-more")}]}}):t._e(),t._v(" "),t._t("right")],2)])},l=[],c={render:r,staticRenderFns:l},u=c,d=i("VU/8"),h=a,p=d(o,u,!1,h,null,null);e.a=p.exports},Bfwr:function(t,e,i){"use strict";function a(t){i("3iZP")}var n=(Boolean,String,String,String,{name:"loading",model:{prop:"show",event:"change"},props:{show:Boolean,text:String,position:String,transition:{type:String,default:"vux-mask"}},watch:{show:function(t){this.$emit("update:show",t)}}}),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:t.transition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-loading_toast vux-loading",class:t.text?"":"vux-loading-no-text"},[i("div",{staticClass:"weui-mask_transparent"}),t._v(" "),i("div",{staticClass:"weui-toast",style:{position:t.position}},[i("i",{staticClass:"weui-loading weui-icon_toast"}),t._v(" "),t.text?i("p",{staticClass:"weui-toast__content"},[t._v(t._s(t.text||"加载中")),t._t("default")],2):t._e()])])])},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,null,null);e.a=d.exports},C8li:function(t,e){},D94q:function(t,e){},DC2r:function(t,e){},EyPq:function(t,e){},FtID:function(t,e){},"Gz2+":function(t,e){},H56V:function(t,e){},HSa9:function(t,e){},Icya:function(t,e){},KXcw:function(t,e){},Luh7:function(t,e){},MUCD:function(t,e){},NHnr:function(t,e,i){"use strict";function a(t){i("C8li"),i("OgSk")}function n(t){i("D94q")}function s(t){i("ZUNL")}function o(t){i("Ngll")}function r(t){i("Luh7")}function l(t,e){return tt()(t)===tt()(e)}function c(t,e){return tt()(t)===tt()(e)}function u(t){i("uGHa")}function d(t){i("78BN")}function h(t){i("MUCD")}function p(t){i("FtID")}function m(t){i("Gz2+")}function f(t){i("WDiO")}function v(t){i("9p9P")}function g(t){i("0q+O")}function _(t){i("DC2r")}function w(t){i("wPer")}function x(t){i("mWsR"),i("HSa9")}function b(t){i("wJQ+")}function S(t){i("NxQa")}function y(t){i("ifnV"),i("xpjF")}function C(t){i("j/tg")}function k(t){i("EyPq")}function $(t){i("71Ht")}function T(t){i("hqKk")}function D(t){i("seeO")}function R(t){i("4EIw")}function V(t){i("94nV")}function B(t){i("vugk")}function I(t){i("yoq6")}function O(t){i("Icya")}function P(t){i("spwv")}function F(t){i("4/Wm")}Object.defineProperty(e,"__esModule",{value:!0});var E=i("7+uW"),j=i("v5o6"),N=i.n(j),L=i("/ocq"),M={name:"app",data:function(){return{json:{}}}},U=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},A=[],H={render:U,staticRenderFns:A},q=H,z=i("VU/8"),W=a,Y=z(M,q,!1,W,null,null),X=Y.exports,G=i("mtWM"),K=i.n(G),J=i("Rf8U"),Q=i.n(J),Z=i("mvHQ"),tt=i.n(Z),et=(encodeURIComponent("http://facility.mymicedb.com/redirect"),{name:"Home",created:function(){this.autoCloseReport(),this.login()},methods:{getTestToken:function(){this.utils.post(this.api.weworkToken,{wework_id:"ChenZhen"},this.testlogin,this.$vux.confirm)},testlogin:function(t){window.localStorage.setItem("token",t.token),window.localStorage.setItem("user",tt()(t.data)),window.localStorage.getItem("token")&&this.$router.push({path:"/devices"})},login:function(){var t=this;if(window.localStorage.getItem("token"))this.$router.push({path:"/devices"});else{var e=this.api.jssign+"?url="+window.location.href;this.utils.get(e,function(e){t.json.time_stamp=e.data.timestamp,t.json.noncestr=e.data.nonce_str,t.json.signature=e.data.signature,window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+it+"&redirect_uri="+at+"&response_type=code&scope=snsapi_base&agentid="+nt+"&state=STATE#wechat_redirect"},this.$vux.confirm)}},autoCloseReport:function(){this.utils.get(this.api.autoCloseReport,this.closeReportResult)},closeReportResult:function(t){console.log("autoClose:",t)}},data:function(){return{flag:!0,json:{}}}}),it="wwa417d520fd30a759",at=encodeURIComponent("http://facility.mymicedb.com/redirect"),nt="1000016",st=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},ot=[],rt={render:st,staticRenderFns:ot},lt=rt,ct=i("VU/8"),ut=n,dt=ct(et,lt,!1,ut,"data-v-56aab8b8",null),ht=dt.exports,pt={name:"view-box",props:["bodyPaddingTop","bodyPaddingBottom"],methods:{scrollTo:function(t){this.$refs.viewBoxBody.scrollTop=t},getScrollTop:function(){return this.$refs.viewBoxBody.scrollTop},getScrollBody:function(){return this.$refs.viewBoxBody}}},mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-tab"},[t._t("header"),t._v(" "),i("div",{ref:"viewBoxBody",staticClass:"weui-tab__panel vux-fix-safari-overflow-scrolling",style:{paddingTop:t.bodyPaddingTop,paddingBottom:t.bodyPaddingBottom},attrs:{id:"vux_view_box_body"}},[t._t("default")],2),t._v(" "),t._t("bottom")],2)},ft=[],vt={render:mt,staticRenderFns:ft},gt=vt,_t=i("VU/8"),wt=s,xt=_t(pt,gt,!1,wt,null,null),bt=xt.exports,St=i("ABCa"),yt=i("KRg4"),Ct=(yt.a,Boolean,String,String,String,Array,Boolean,String,String,Boolean,{name:"search",mixins:[yt.a],props:{required:{type:Boolean,default:!1},placeholder:String,cancelText:String,value:{type:String,default:""},results:{type:Array,default:function(){return[]}},autoFixed:{type:Boolean,default:!0},top:{type:String,default:"0px"},position:{type:String,default:"fixed"},autoScrollToTop:Boolean},created:function(){this.value&&(this.currentValue=this.value)},computed:{fixPosition:function(){return this.isFixed?"absolute"===this.position?"absolute":"fixed":"static"}},methods:{emitEvent:function(){var t=this;this.$nextTick(function(){t.$emit("input",t.currentValue),t.$emit("on-change",t.currentValue)})},onComposition:function(t,e){"start"===e&&(this.onInput=!0),"end"===e&&(this.onInput=!1,this.emitEvent()),"input"===e&&(this.onInput||this.emitEvent())},clear:function(){this.currentValue="",this.emitEvent(),this.isFocus=!0,this.setFocus(),this.autoFixed&&!this.isFixed&&(this.isFixed=!0),this.$emit("on-clear")},cancel:function(){this.isCancel=!0,this.currentValue="",this.emitEvent(),this.isFixed=!1,this.$emit("on-cancel")},handleResultClick:function(t){this.$emit("result-click",t),this.$emit("on-result-click",t),this.isCancel=!0,this.isFixed=!1},touch:function(){this.isCancel=!1,this.autoFixed&&(this.isFixed=!0),this.$emit("on-touch")},setFocus:function(){this.$refs.input.focus()},setBlur:function(){this.$refs.input.blur()},onFocus:function(){this.isFocus=!0,this.$emit("on-focus"),this.touch()},onBlur:function(){this.isFocus=!1,this.$emit("on-blur")}},data:function(){return{onInput:!1,currentValue:"",isCancel:!0,isFocus:!1,isFixed:!1}},watch:{isFixed:function(t){!0===t&&(this.setFocus(),this.isFocus=!0,this.autoScrollToTop&&setTimeout(function(){window.scrollTo(0,0)},150))},value:function(t){this.currentValue=t}}}),kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-search-box",class:{"vux-search-fixed":t.isFixed},style:{top:t.isFixed?t.top:"",position:t.fixPosition}},[i("div",{staticClass:"weui-search-bar",class:{"weui-search-bar_focusing":!t.isCancel||t.currentValue}},[t._t("left"),t._v(" "),i("form",{staticClass:"weui-search-bar__form",attrs:{action:"."},on:{submit:function(e){return e.preventDefault(),t.$emit("on-submit",t.value)}}},[i("label",{directives:[{name:"show",rawName:"v-show",value:!t.isFixed&&t.autoFixed,expression:"!isFixed && autoFixed"}],staticClass:"vux-search-mask",attrs:{for:"search_input_"+t.uuid},on:{click:t.touch}}),t._v(" "),i("div",{staticClass:"weui-search-bar__box"},[i("i",{staticClass:"weui-icon-search"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-search-bar__input",attrs:{type:"search",autocomplete:"off",id:"search_input_"+t.uuid,placeholder:t.placeholder,required:t.required},domProps:{value:t.currentValue},on:{focus:t.onFocus,blur:t.onBlur,compositionstart:function(e){return t.onComposition(e,"start")},compositionend:function(e){return t.onComposition(e,"end")},input:[function(e){e.target.composing||(t.currentValue=e.target.value)},function(e){return t.onComposition(e,"input")}]}}),t._v(" "),i("a",{directives:[{name:"show",rawName:"v-show",value:t.currentValue,expression:"currentValue"}],staticClass:"weui-icon-clear",attrs:{href:"javascript:"},on:{click:t.clear}})]),t._v(" "),i("label",{directives:[{name:"show",rawName:"v-show",value:!t.isFocus&&!t.value,expression:"!isFocus && !value"}],staticClass:"weui-search-bar__label",attrs:{for:"search_input_"+t.uuid}},[i("i",{staticClass:"weui-icon-search"}),t._v(" "),i("span",[t._v(t._s(t.placeholder||"搜索"))])])]),t._v(" "),i("a",{staticClass:"weui-search-bar__cancel-btn",attrs:{href:"javascript:"},on:{click:t.cancel}},[t._v(t._s(t.cancelText||"取消")+"\n    ")]),t._v(" "),t._t("right")],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isFixed,expression:"isFixed"}],staticClass:"weui-cells vux-search_show"},[t._t("default"),t._v(" "),t._l(t.results,function(e){return i("div",{staticClass:"weui-cell weui-cell_access",on:{click:function(i){return t.handleResultClick(e)}}},[i("div",{staticClass:"weui-cell__bd weui-cell_primary"},[i("p",[t._v(t._s(e.title))])])])})],2)])},$t=[],Tt={render:kt,staticRenderFns:$t},Dt=Tt,Rt=i("VU/8"),Vt=o,Bt=Rt(Ct,Dt,!1,Vt,null,null),It=Bt.exports,Ot=(String,String,String,String,String,Number,Array,Object,Number,Boolean,{name:"checker",props:{defaultItemClass:String,selectedItemClass:String,disabledItemClass:String,type:{type:String,default:"radio"},value:[String,Number,Array,Object],max:Number,radioRequired:Boolean},watch:{value:function(t){this.currentValue=t},currentValue:function(t){this.$emit("input",t),this.$emit("on-change",t)}},data:function(){return{currentValue:this.value}}}),Pt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-checker-box"},[t._t("default")],2)},Ft=[],Et={render:Pt,staticRenderFns:Ft},jt=Et,Nt=i("VU/8"),Lt=r,Mt=Nt(Ot,jt,!1,Lt,null,null),Ut=Mt.exports,At=i("pFYg"),Ht=i.n(At),qt=(String,Number,Object,Boolean,{name:"checker-item",props:{value:{type:[String,Number,Object],required:!0},disabled:Boolean},watch:{disabled:function(t){t&&"radio"===this.$parent.type&&this.value===this.$parent.currentValue&&(this.$parent.currentValue="")}},computed:{classNames:function(){var t=this,e="string"==typeof this.value||"number"==typeof this.value,i={"vux-tap-active":!this.disabled};if(this.$parent.defaultItemClass&&(i[this.$parent.defaultItemClass]=!0),this.$parent.selectedItemClass){var a=!1;if("radio"===this.$parent.type)e&&this.$parent.currentValue===this.value?a=!0:"object"===Ht()(this.value)&&c(this.$parent.currentValue,this.value)&&(a=!0);else if("string"==typeof this.value)this.$parent.currentValue.indexOf(this.value)>-1&&(a=!0);else if(this.$parent.currentValue&&this.$parent.currentValue.length){var n=this.$parent.currentValue.filter(function(e){return c(e,t.value)});a=n.length>0}i[this.$parent.selectedItemClass]=a}return this.$parent.disabledItemClass&&(i[this.$parent.disabledItemClass]=this.disabled),i}},methods:{select:function(){"radio"===this.$parent.type?this.selectRadio():this.selectCheckbox()},selectRadio:function(){this.disabled||(this.$parent.currentValue===this.value?this.$parent.radioRequired||(this.$parent.currentValue=""):this.$parent.currentValue=this.value),this.$emit("on-item-click",this.value,this.disabled)},selectCheckbox:function(){this.$parent.currentValue&&null!==this.$parent.currentValue||(this.$parent.currentValue=[]);var t="string"==typeof this.value||"number"==typeof this.value;if(!this.disabled){var e=-1;e=t?this.$parent.currentValue.indexOf(this.value):this.$parent.currentValue.map(function(t){return tt()(t)}).indexOf(tt()(this.value)),e>-1?this.$parent.currentValue.splice(e,1):(!this.$parent.max||this.$parent.max&&null!==this.$parent.currentValue&&this.$parent.currentValue.length<this.$parent.max)&&(this.$parent.currentValue&&this.$parent.currentValue.length||(this.$parent.currentValue=[]),this.$parent.currentValue.push(this.value))}this.$emit("on-item-click",this.value,this.disabled)}}}),zt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-checker-item",class:t.classNames,on:{click:t.select}},[t._t("default")],2)},Wt=[],Yt={render:zt,staticRenderFns:Wt},Xt=Yt,Gt=i("VU/8"),Kt=u,Jt=Gt(qt,Xt,!1,Kt,null,null),Qt=Jt.exports,Zt={name:"divider"},te=function(){var t=this,e=t.$createElement;return(t._self._c||e)("p",{staticClass:"vux-divider"},[t._t("default")],2)},ee=[],ie={render:te,staticRenderFns:ee},ae=ie,ne=i("VU/8"),se=d,oe=ne(Zt,ae,!1,se,null,null),re=oe.exports,le=i("2sLL"),ce=i("fZjL"),ue=i.n(ce),de=i("+v63"),he=i("te2A"),pe=(Boolean,String,String,Boolean,Boolean,Boolean,String,String,Object,Boolean,Boolean,Boolean,{name:"popup",props:{value:Boolean,height:{type:String,default:"auto"},width:{type:String,default:"auto"},showMask:{type:Boolean,default:!0},isTransparent:Boolean,hideOnBlur:{type:Boolean,default:!0},position:{type:String,default:"bottom"},maxHeight:String,popupStyle:Object,hideOnDeactivated:{type:Boolean,default:!0},shouldRerenderOnShow:{type:Boolean,default:!1},shouldScrollTopOnShow:{type:Boolean,default:!1}},created:function(){this.$vux&&this.$vux.config&&"VIEW_BOX"===this.$vux.config.$layout&&(this.layout="VIEW_BOX")},mounted:function(){var t=this;this.$overflowScrollingList=document.querySelectorAll(".vux-fix-safari-overflow-scrolling"),this.$nextTick(function(){var e=t;t.popup=new de.a({showMask:e.showMask,container:e.$el,hideOnBlur:e.hideOnBlur,onOpen:function(){e.fixSafariOverflowScrolling("auto"),e.show=!0},onClose:function(){e.show=!1,window.__$vuxPopups&&ue()(window.__$vuxPopups).length>1||document.querySelector(".vux-popup-dialog.vux-popup-mask-disabled")||setTimeout(function(){e.fixSafariOverflowScrolling("touch")},300)}}),t.value&&t.popup.show(),t.initialShow=!1})},deactivated:function(){this.hideOnDeactivated&&(this.show=!1),this.removeModalClassName()},methods:{fixSafariOverflowScrolling:function(t){if(this.$overflowScrollingList.length)for(var e=0;e<this.$overflowScrollingList.length;e++)this.$overflowScrollingList[e].style.webkitOverflowScrolling=t},removeModalClassName:function(){"VIEW_BOX"===this.layout&&he.a.removeClass(document.body,"vux-modal-open")},doShow:function(){this.popup&&this.popup.show(),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),"VIEW_BOX"===this.layout&&he.a.addClass(document.body,"vux-modal-open"),this.hasFirstShow||(this.$emit("on-first-show"),this.hasFirstShow=!0)},scrollTop:function(){var t=this;this.$nextTick(function(){t.$el.scrollTop=0;var e=t.$el.querySelectorAll(".vux-scrollable");if(e.length)for(var i=0;i<e.length;i++)e[i].scrollTop=0})}},data:function(){return{layout:"",initialShow:!0,hasFirstShow:!1,shouldRenderBody:!0,show:this.value}},computed:{styles:function(){var t={};if(this.position&&"bottom"!==this.position&&"top"!==this.position?t.width=this.width:t.height=this.height,this.maxHeight&&(t["max-height"]=this.maxHeight),this.isTransparent&&(t.background="transparent"),this.popupStyle)for(var e in this.popupStyle)t[e]=this.popupStyle[e];return t}},watch:{value:function(t){this.show=t},show:function(t){var e=this;this.$emit("input",t),t?this.shouldRerenderOnShow?(this.shouldRenderBody=!1,this.$nextTick(function(){e.scrollTop(),e.shouldRenderBody=!0,e.doShow()})):(this.shouldScrollTopOnShow&&this.scrollTop(),this.doShow()):(this.$emit("on-hide"),this.show=!1,this.popup.hide(!1),setTimeout(function(){document.querySelector(".vux-popup-dialog.vux-popup-show")||e.fixSafariOverflowScrolling("touch"),e.removeModalClassName()},200))}},beforeDestroy:function(){this.popup&&this.popup.destroy(),this.fixSafariOverflowScrolling("touch"),this.removeModalClassName()}}),me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"vux-popup-animate-"+t.position}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show&&!t.initialShow,expression:"show && !initialShow"}],staticClass:"vux-popup-dialog",class:["vux-popup-"+t.position,t.show?"vux-popup-show":""],style:t.styles},[t.shouldRenderBody?t._t("default"):t._e()],2)])},fe=[],ve={render:me,staticRenderFns:fe},ge=ve,_e=i("VU/8"),we=h,xe=_e(pe,ge,!1,we,null,null),be=xe.exports,Se=i("63CM"),ye=i("GQaK"),Ce=(Object,{name:"DeviceItem",props:{device:Object}}),ke=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("router-link",{staticClass:"weui-media-box weui-media-box_appmsg",attrs:{to:"/device/"+t.device.id}},[t.device.images?i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:t.device.images,alt:""}})]):t._e(),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("h4",{staticClass:"weui-media-box__title",domProps:{innerHTML:t._s(t.device.name)}}),t._v(" "),i("p",{staticClass:"weui-media-box__desc",domProps:{innerHTML:t._s(t.device.description)}})])])},$e=[],Te={render:ke,staticRenderFns:$e},De=Te,Re=i("VU/8"),Ve=Re(Ce,De,!1,null,null,null),Be=Ve.exports,Ie=i("gyMJ"),Oe=(Se.a,St.a,le.a,{directives:{TransferDom:Se.a},components:{XHeader:St.a,XButton:le.a,Search:It,ViewBox:bt,DeviceItem:Be,Checker:Ut,CheckerItem:Qt,Divider:re,Popup:be},mounted:function(){var t=this;this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)}),this.getFilters(),this.$store.commit("setSelected","详细信息")},data:function(){return{allDevices:[],devices:[],searchText:"",isScreenShow:!1,filters:{},category:"",categorys:[],statusList:[],status:"",searchCondition:[],scroll:scroll,pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,page:1,maxpage:0,nomore:!1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){console.log("下拉刷新"),this.page=1;var t=this.api.devices;t+="?category="+this.category,t+="&status="+this.status,t+="&page="+this.page,this.searchText&&(t+="&keyword="+this.searchText),console.log(t),this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(!this.nomore&&this.scroll.y<=this.scroll.maxScrollY+50){this.page++,console.log("上拉加载",this.page);var t=this.api.devices;t+="?category="+this.category,t+="&status="+this.status,t+="&page="+this.page,this.searchText&&(t+="&keyword="+this.searchText),this.page<=this.maxpage?this.utils.get(t,this.addData,this.$vux.confirm):this.nomore=!0}},addData:function(t){console.log(t),this.devices=this.devices.concat(t.data),this.allDevices=this.allDevices.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.devices=t.data,this.allDevices=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown()})},getFilters:function(){var t=this;this.utils.get(this.api.filters,function(e){console.log(e),t.filters=e.data,t.categorys=e.data.categorys.values,t.statusList=e.data.status.values},this.$vux.confirm)},formatDevice:function(t){return{title:t.name,desc:t.description,src:t.images}},resultClick:function(t){var e=this;window.alert("you click the result item: "+tt()(t)),this.$nextTick(function(){e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj,click:!0}),e.onPullingDown(),e.scroll.on("pullingDown",e.onPullingDown),e.scroll.on("scrollEnd",e.onPullingUp)})},getResult:function(t){console.log("on-change",this.searchText)},getData:function(){var t=this,e=this,i=Ie.a.devices;i+="?category="+e.category,i+="&status="+e.status,e.searchText&&(i+="&keyword="+e.searchText),console.log(i),this.axios.get(i).then(function(e){console.log(e.data.data),t.devices=e.data.data,t.allDevices=e.data.data}).catch(function(t){console.log(t)}).finally()},onSubmit:function(){var t=this;console.log("on-submit",this.searchText),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},onFocus:function(){console.log("on focus")},onCancel:function(){console.log("on cancel"),this.devices=this.allDevices},clickScreen:function(){this.isScreenShow=!0},clickTime:function(){},endScreen:function(){var t=this;this.isScreenShow=!1,this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})}},watch:{isScreenShow:function(t,e){console.log(t,"isScreenShow",e)}}}),Pe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("设备列表")]),t._v(" "),i("search",{ref:"search",attrs:{position:"absolute",top:"46px","auto-fixed":!1},on:{"result-click":t.resultClick,"on-change":t.getResult,"on-focus":t.onFocus,"on-cancel":t.onCancel,"on-submit":t.onSubmit},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),t._v(" "),i("div",{staticStyle:{padding:"10px",height:"15px","border-bottom":"solid 1px #efeff4"}},[i("div",{staticClass:"weui-media-box__desc",staticStyle:{float:"right"},on:{click:t.clickScreen}},[t._v("筛选")])]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("popup",{attrs:{position:"right",width:"100%"},model:{value:t.isScreenShow,callback:function(e){t.isScreenShow=e},expression:"isScreenShow"}},[t.filters.categorys&&t.isScreenShow?i("div",{attrs:{id:""}},[i("divider",{staticStyle:{padding:"15px"}},[t._v(t._s(t.filters.categorys.name))]),t._v(" "),i("div",{staticClass:"box"},[i("checker",{attrs:{"default-item-class":"demo1-item","selected-item-class":"demo1-item-selected"},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}},t._l(t.categorys,function(e,a){return i("checker-item",{key:a,attrs:{value:a}},[t._v(t._s(e))])}),1)],1),t._v(" "),i("divider",{staticStyle:{padding:"15px"}},[t._v(t._s(t.filters.status.name))]),t._v(" "),i("div",{staticClass:"box"},[i("checker",{attrs:{"default-item-class":"demo1-item","selected-item-class":"demo1-item-selected"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusList,function(e,a){return i("checker-item",{key:a,attrs:{value:a}},[t._v(t._s(e))])}),1)],1)],1):t._e(),t._v(" "),i("div",{staticStyle:{padding:"15px"}},[i("x-button",{attrs:{plain:"",type:"primary"},nativeOn:{click:function(e){return t.endScreen(e)}}},[t._v("确定")])],1)])],1),t._v(" "),i("div",{staticClass:"position-devices-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"content"},[t._l(t.devices,function(t){return i("device-item",{key:t.id+"device",attrs:{device:t}})}),t._v(" "),t.nomore?i("div",{staticClass:"no-more weui-media-box__desc"},[t._v("没有更多数据了")]):t._e()],2)])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])],1)},Fe=[],Ee={render:Pe,staticRenderFns:Fe},je=Ee,Ne=i("VU/8"),Le=p,Me=Ne(Oe,je,!1,Le,"data-v-4a6c29a2",null),Ue=Me.exports,Ae=i("0FxO"),He=(Object,Object,{name:"card",props:{header:Object,footer:Object},methods:{onClickFooter:function(){this.footer.link&&Object(Ae.a)(this.footer.link,this.$router),this.$emit("on-click-footer")}}}),qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weui-panel weui-panel_access"},[t.header&&t.header.title?i("div",{staticClass:"weui-panel__hd",domProps:{innerHTML:t._s(t.header.title)},on:{click:function(e){return t.$emit("on-click-header")}}}):t._e(),t._v(" "),t._t("header"),t._v(" "),i("div",{staticClass:"weui-panel__bd"},[i("div",{staticClass:"vux-card-content"},[t._t("content")],2)]),t._v(" "),i("div",{staticClass:"weui-panel__ft"},[t.footer&&t.footer.title?i("a",{staticClass:"weui-cell weui-cell_access weui-cell_link",attrs:{href:"javascript:"},on:{click:t.onClickFooter}},[i("div",{staticClass:"weui-cell__bd",domProps:{innerHTML:t._s(t.footer.title)}})]):t._e()]),t._v(" "),t._t("footer")],2)},ze=[],We={render:qe,staticRenderFns:ze},Ye=We,Xe=i("VU/8"),Ge=m,Ke=Xe(He,Ye,!1,Ge,null,null),Je=Ke.exports,Qe=i("piuB"),Ze=(Qe.b,Number,String,String,String,String,Boolean,Function,String,Boolean,Number,String,{name:"tab",mixins:[Qe.b],mounted:function(){var t=this;this.$nextTick(function(){setTimeout(function(){t.hasReady=!0},0)})},props:{lineWidth:{type:Number,default:3},activeColor:String,barActiveColor:String,defaultColor:String,disabledColor:String,animate:{type:Boolean,default:!0},customBarWidth:[Function,String],preventDefault:Boolean,scrollThreshold:{type:Number,default:4},barPosition:{type:String,default:"bottom",validator:function(t){return-1!==["bottom","top"].indexOf(t)}}},computed:{barLeft:function(){if(this.hasReady){var t=this.$refs.nav,e=this.scrollable?t.offsetWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return this.currentIndex*(100/e)+"%"}},barRight:function(){if(this.hasReady){var t=this.$refs.nav,e=this.scrollable?t.offsetWidth/this.$children[this.currentIndex||0].$el.getBoundingClientRect().width:this.number;return(e-this.currentIndex-1)*(100/e)+"%"}},innerBarStyle:function(){return{width:"function"==typeof this.customBarWidth?this.customBarWidth(this.currentIndex):this.customBarWidth,background:this.barActiveColor||this.activeColor}},barStyle:function(){var t={left:this.barLeft,right:this.barRight,display:"block",height:this.lineWidth+"px",transition:this.hasReady?null:"none"};return this.customBarWidth?t.background="transparent":t.background=this.barActiveColor||this.activeColor,t},barClass:function(){return{"vux-tab-ink-bar-transition-forward":"forward"===this.direction,"vux-tab-ink-bar-transition-backward":"backward"===this.direction}},scrollable:function(){return this.number>this.scrollThreshold}},watch:{currentIndex:function(t,e){this.direction=t>e?"forward":"backward",this.$emit("on-index-change",t,e),this.hasReady&&this.scrollToActiveTab()}},data:function(){return{direction:"forward",right:"100%",hasReady:!1}},methods:{scrollToActiveTab:function(){var t=this;if(this.scrollable&&this.$children&&this.$children.length){var e=this.$children[this.currentIndex].$el,i=0,a=function a(){var n=t.$refs.nav;n.scrollLeft+=(e.offsetLeft-(n.offsetWidth-e.offsetWidth)/2-n.scrollLeft)/15,++i<15&&window.requestAnimationFrame(a)};window.requestAnimationFrame(a)}}}}),ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-tab-wrap",class:"top"===t.barPosition?"vux-tab-bar-top":""},[i("div",{staticClass:"vux-tab-container"},[i("div",{ref:"nav",staticClass:"vux-tab",class:[{"vux-tab-no-animate":!t.animate},{scrollable:t.scrollable}]},[t._t("default"),t._v(" "),t.animate?i("div",{staticClass:"vux-tab-ink-bar",class:t.barClass,style:t.barStyle},[t.customBarWidth?i("span",{staticClass:"vux-tab-bar-inner",style:t.innerBarStyle}):t._e()]):t._e()],2)])])},ei=[],ii={render:ti,staticRenderFns:ei},ai=ii,ni=i("VU/8"),si=f,oi=ni(Ze,ai,!1,si,null,null),ri=oi.exports,li=(Qe.a,String,Boolean,String,String,String,{name:"tab-item",mixins:[Qe.a],props:{activeClass:String,disabled:Boolean,badgeBackground:{type:String,default:"#f74c31"},badgeColor:{type:String,default:"#fff"},badgeLabel:String},computed:{style:function(){return{borderWidth:this.$parent.lineWidth+"px",borderColor:this.$parent.activeColor,color:this.currentSelected?this.$parent.activeColor:this.disabled?this.$parent.disabledColor:this.$parent.defaultColor,border:this.$parent.animate?"none":"auto"}}}}),ci=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-tab-item",class:[t.currentSelected?t.activeClass:"",{"vux-tab-selected":t.currentSelected,"vux-tab-disabled":t.disabled}],style:t.style,on:{click:t.onItemClick}},[t._t("default"),t._v(" "),void 0!==t.badgeLabel&&""!==t.badgeLabel?i("span",{staticClass:"vux-tab-item-badge",style:{background:t.badgeBackground,color:t.badgeColor}},[t._v("\n  "+t._s(t.badgeLabel))]):t._e()],2)},ui=[],di={render:ci,staticRenderFns:ui},hi=di,pi=i("VU/8"),mi=pi(li,hi,!1,null,null,null),fi=mi.exports,vi=i("fBcm"),gi=i("b+jt"),_i=i("YxJB"),wi=i("3Lt7"),xi=function(){return["详情信息","维修记录","维护记录"]},bi=(vi.a,gi.a,St.a,_i.a,wi.a,function(){return["详情信息","维修记录","维护记录"]}),Si={name:"device-view",components:{Card:Je,Tab:ri,TabItem:fi,Swiper:vi.a,SwiperItem:gi.a,XHeader:St.a,Flexbox:_i.a,FlexboxItem:wi.a,DeviceInfo:function(){return new Promise(function(t){t()}).then(i.bind(null,"SqFc"))},MaintainList:function(){return i.e(1).then(i.bind(null,"Cmgm"))},RepairList:function(){return i.e(0).then(i.bind(null,"lISs"))}},data:function(){return{index:0,index01:0,selected:"详细信息",list:bi(),getBarWidth:function(t){return 22*(t+1)+"px"},device:null,errored:!1,loading:!1,fullHeight:(document.documentElement.clientHeight-.4*document.documentElement.clientWidth-90)/document.documentElement.clientWidth}},created:function(){var t=this.$route.params.tab;t>0?(this.$store.commit("setSelected",bi()[t-1]),this.selected=bi()[t-1]):this.selected=this.$store.state.selected},mounted:function(){var t=this;this.axios.get(Ie.a.detail+this.$route.params.id).then(function(e){t.device=e.data.data}).catch(function(e){console.log(e),t.errored=!0}).finally()},watch:{fullHeight:function(t){if(!this.timer){this.fullHeight=t,this.timer=!0;var e=this;setTimeout(function(){e.timer=!1},400)}}},methods:{switchTabItem:function(t){var e=this;console.log("on-before-index-change",t),this.$vux.loading.show({text:"loading"}),setTimeout(function(){e.$vux.loading.hide(),e.index01=t},1e3)},onItemClick:function(t){this.$store.commit("setSelected",bi()[t])},addTab:function(){this.list.length<5&&(this.list=bi().slice(0,this.list.length+1))},removeTab:function(){this.list.length>1&&(this.list=bi().slice(0,this.list.length-1))},next:function(){this.index===this.list.length-1?this.index=0:++this.index},prev:function(){0===this.index?this.index=this.list.length-1:--this.index}}},yi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",[t._v("设备管理")]),t._v(" "),i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",[i("div",{staticClass:"placeholder device-detail-info-bg"},[i("div",{staticClass:"weui-panel__bd"},[null!==t.device?i("div",{staticClass:"weui-media-box weui-media-box_text"},[i("h2",{staticClass:"weui-media-box__title"},[t._v(t._s(t.device.name))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s("类型："+t.device.category_name))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s("出厂时间："+t.device.product_at_format))])]):t._e()])])]),t._v(" "),i("flexbox-item",{staticStyle:{padding:"10px"}},[i("div",{staticClass:"placeholder"},[i("div",{attrs:{id:"img-bg"}},[null!==t.device?i("img",{attrs:{slot:"header",src:t.device.images},slot:"header"}):t._e()])])])],1),t._v(" "),i("div",[i("tab",{attrs:{"line-width":2,"active-color":"#fc378c"},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},t._l(t.list,function(e,a){return i("tab-item",{key:a,staticClass:"vux-center",attrs:{selected:t.selected===e},on:{"on-item-click":t.onItemClick}},[t._v(t._s(e))])}),1),t._v(" "),i("swiper",{ref:"swiper-wrapper",attrs:{"aspect-ratio":t.fullHeight,"show-dots":!1,id:"swiper-container"},model:{value:t.index,callback:function(e){t.index=e},expression:"index"}},[i("swiper-item",[null!==t.device&&null!==t.device.user?i("device-info",{staticClass:"device-detail-tab-item",attrs:{device:t.device}}):t._e()],1),t._v(" "),i("swiper-item",[null!==t.device&&null!==t.device.user?i("repair-list",{staticClass:"device-detail-tab-item",attrs:{device:t.device}}):t._e()],1),t._v(" "),i("swiper-item",[null!==t.device&&null!==t.device.user?i("maintain-list",{staticClass:"device-detail-tab-item",attrs:{device_id:t.device.id}}):t._e()],1)],1)],1)],1)},Ci=[],ki={render:yi,staticRenderFns:Ci},$i=ki,Ti=i("VU/8"),Di=v,Ri=Ti(Si,$i,!1,Di,"data-v-01a4257b",null),Vi=Ri.exports,Bi=i("oWtu"),Ii=(Bi.a,Boolean,String,{name:"check-icon",components:{Icon:Bi.a},methods:{updateValue:function(){this.$emit("update:value",!this.value)}},props:{value:{type:Boolean,default:!1},type:{type:String,default:"default"}}}),Oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-check-icon",on:{click:t.updateValue}},[i("icon",{directives:[{name:"show",rawName:"v-show",value:"default"===t.type&&t.value,expression:"type === 'default' && value"}],attrs:{type:"success"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:"plain"===t.type&&t.value,expression:"type === 'plain' && value"}],attrs:{type:"success_circle"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.value,expression:"!value"}],attrs:{type:"circle"}}),t._v(" "),i("span",[t._t("default")],2)],1)},Pi=[],Fi={render:Oi,staticRenderFns:Pi},Ei=Fi,ji=i("VU/8"),Ni=g,Li=ji(Ii,Ei,!1,Ni,null,null),Mi=Li.exports,Ui={name:"group-title"},Ai=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"weui-cells__title"},[t._t("default")],2)},Hi=[],qi={render:Ai,staticRenderFns:Hi},zi=qi,Wi=i("VU/8"),Yi=_,Xi=Wi(Ui,zi,!1,Yi,null,null),Gi=Xi.exports,Ki=i("iIFr"),Ji=(St.a,vi.a,gi.a,le.a,Ki.a,{name:"DeviceMaintainDetail",components:{XHeader:St.a,Swiper:vi.a,SwiperItem:gi.a,CheckIcon:Mi,GroupTitle:Gi,XButton:le.a,DeviceCard:Ki.a},data:function(){return{demo01_index:0,demo01_list:[],plan_id:0,plan:{},device:null,canFinish:!1}},mounted:function(){if(this.USER=JSON.parse(window.localStorage.getItem("user")),this.plan_id=this.$route.params.id,this.plan_id>0){var t=this.api.maintain+"/"+this.plan_id;this.utils.get(t,this.loadData,this.$vux.confirm)}},methods:{demo01_onIndexChange:function(t){this.demo01_index=t},loadData:function(t){if(this.plan=t.data,this.device=t.data.device,this.device.image_list&&this.device.image_list.length>0)for(var e=0;e<this.device.image_list.length;e++){var i={};i.url="javascript:",i.img=this.device.image_list[e],this.demo01_list.push(i)}this.USER&&this.USER.id>0&&this.USER.id===this.plan.user.id&&1===this.plan.status&&(this.canFinish=!0)},finishPlan:function(){var t=this;if(t.plan_id>0){var e=window.localStorage.getItem("token"),i=t.api.finishPlan+"?id="+t.plan_id+"&token="+e;t.utils.get(i,function(e){e&&t.loadData(e)},t.$vux.confirm)}}}}),Qi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",[t._v("维护计划详情")]),t._v(" "),t.demo01_list.lenght>0?i("swiper",{attrs:{list:t.demo01_list},on:{"on-index-change":t.demo01_onIndexChange},model:{value:t.demo01_index,callback:function(e){t.demo01_index=e},expression:"demo01_index"}}):t._e(),t._v(" "),t.device?i("device-card",{attrs:{device:t.device}}):t._e(),t._v(" "),i("div",[i("div",{staticClass:"weui-form-preview__bd plan-detail"},[t.plan.name?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("计划名称")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.name))])]):t._e(),t._v(" "),t.plan.cycle?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("周期")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.cycle+" "+t.plan.cycle_unit))])]):t._e(),t._v(" "),t.plan.user?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("负责人")]),t._v(" "),t.plan.user.user_nick?i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.user.user_nick))]):i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.user.username))])]):t._e(),t._v(" "),t.plan.pre_end_time_format?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("开始时间")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.pre_end_time_format))])]):t._e(),t._v(" "),t.plan.status?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("状态")]),t._v(" "),i("span",{staticClass:"device-maintain-status",class:{textRed:1==t.plan.status,textOrange:2==t.plan.status,textGreen:3==t.plan.status}},[t._v("\n           "+t._s(t.plan.status_name)+" \n        ")])]):t._e(),t._v(" "),i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("结束时间")]),t._v(" "),t.plan.end_time_format?i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.plan.end_time_format))]):i("span",{staticClass:"weui-form-preview__value"},[t._v(" 未完成 ")])])]),t._v(" "),i("GroupTitle",[t._v("计划详情")]),t._v(" "),i("div",{staticClass:"plan-description"},[t._v(t._s(t.plan.content))]),t._v(" "),t.canFinish?i("x-button",{staticClass:"btn-finish",attrs:{type:"primary"},nativeOn:{click:function(e){return t.finishPlan()}}},[t._v("完成")]):t._e()],1)],1)},Zi=[],ta={render:Qi,staticRenderFns:Zi},ea=ta,ia=i("VU/8"),aa=w,na=ia(Ji,ea,!1,aa,"data-v-29f1465c",null),sa=na.exports,oa=i("e66H"),ra=i("62KO"),la=i("1DHf"),ca=(Se.a,Ki.a,St.a,vi.a,gi.a,oa.a,ra.a,le.a,_i.a,wi.a,la.a,{name:"DeviceRepairDetail",directives:{TransferDom:Se.a},components:{DeviceCard:Ki.a,XHeader:St.a,Swiper:vi.a,SwiperItem:gi.a,Rater:oa.a,ViewBox:bt,Confirm:ra.a,XButton:le.a,Flexbox:_i.a,FlexboxItem:wi.a,Cell:la.a},data:function(){return{repair_id:"",demo01_index:0,demo01_list:[],rater_disabled:!1,stars:0,comments:[],showAddComment:!1,reporter:{},assignee:null,reportinfo:null,repairinfo:null,score:null,imgarrow:"",error_msg:"",confirm:!1,can_star:!1,can_repair:!1,can_accept_report:!1,can_close:!1,reporterSpan:.5,status_list:{new:{id:0,name:"新建"},doing:{id:1,name:"处理中"},canceled:{id:2,name:"已经取消"},repaired:{id:3,name:"完成修理"},finished:{id:4,name:"完成"}},swiper_height:320}},mounted:function(){var t=this;t.USER=JSON.parse(window.localStorage.getItem("user")),t.TOKEN=window.localStorage.getItem("token"),this.$nextTick(function(){t.repair_id=t.$route.params.id;var e=t.api.repairDetail+t.repair_id;t.utils.get(e,function(e){t.loadReportData(e.data),t.getCommentList()},t.$vux.confirm)})},watch:{stars:function(t,e){this.can_star&&t>0&&t!==e&&this.scoreRepair()}},methods:{demo01_onIndexChange:function(t){this.demo01_index=t},onSwiperItemIndexChange:function(t){console.log("demo item change",t)},onHide:function(){console.log("on hide")},onShow:function(){this.$refs.confirmComment.setInputValue("")},onCancel:function(){},onConfirm:function(t){this.confirm=!1},showConfirm:function(){var t=this;this.confirm=!0,setTimeout(function(){t.confirm=!1},3e3)},getCommentList:function(){var t=this,e=this.api.repairComment+"object_id="+this.repair_id+"&object_type=1";t.utils.get(e,function(e){t.comments=e.data},this.$vux.confirm)},loadReportData:function(t){if(this.reportinfo=t,this.repairinfo=this.reportinfo.repair,this.reporter=this.reportinfo.user,this.reportinfo.assignee&&(this.assignee=this.reportinfo.assigneeinfo),this.can_star=!0,this.repairinfo&&this.repairinfo.score&&(this.score=this.repairinfo.score,this.score.score>0&&(this.stars=this.score.score,this.can_star=!1)),this.reportinfo.status===this.status_list.new.id&&this.USER&&10===this.USER.role&&(this.can_accept_report=!0),this.USER&&(this.assignee&&this.USER.id===this.assignee.id&&(this.can_repair=!0),this.reporter&&this.USER.id===this.reporter.id&&this.reportinfo.status===this.status_list.repaired.id&&(this.can_close=!0)),this.reportinfo.image_list.length>0)for(var e=0;e<this.reportinfo.image_list.length;e++){var i={};i.url="javascript:",i.img=this.reportinfo.image_list[e],this.demo01_list.push(i)}this.can_accept_report||this.assignee&&this.repairinfo||(this.reporterSpan=0)},acceptReport:function(){var t=this.api.acceptReport,e=this,i=new FormData,a=window.localStorage.getItem("token");i.append("token",a),i.append("id",this.repair_id),this.utils.post(t,i,function(t){e.loadReportData(t.data)},this.$vux.confirm)},finishRepair:function(){var t=this,e=this.api.finishRepair+"?token="+window.localStorage.getItem("token");e+="&id="+t.repairinfo.id,this.utils.get(e,function(e){t.loadReportData(e.data)})},closeReport:function(){var t=this,e=this.api.closeReport+"?token="+window.localStorage.getItem("token");e+="&id="+t.reportinfo.id,this.utils.get(e,function(e){t.loadReportData(e.data),t.can_star=!0,t.can_close=!1})},scoreRepair:function(){var t=this;if(this.stars<=0||this.stars>5)return this.error_msg="请填写正确的分数",void this.showConfirm();this.$vux.confirm.show({title:"提示",content:"为本次维修服务打 "+this.stars+" 颗星",showCancelButton:!0,onConfirm:function(){var e=new FormData;t.TOKEN=window.localStorage.getItem("token"),e.append("token",t.TOKEN),e.append("id",t.repairinfo.id),e.append("type",1),e.append("score",t.stars);var i=t.api.score+"?token="+t.TOKEN;t.utils.post(i,e,function(e){t.score=e.data,t.can_star=!1})}})},scoreConfim:function(){this.error_msg="不能重复评分！",this.showConfirm()},clickAddComment:function(){this.TOKEN?this.showAddComment=!0:this.utils.deletaUserData()},onConfirmComment:function(t){this.sendComment(t),this.$refs.confirmComment.setInputValue("")},sendComment:function(t){var e=this;if(""===t)return this.error_msg="评论内容不能为空",void this.showConfirm();var i=this.api.addcomment,a=new FormData;a.append("token",this.TOKEN),a.append("id",this.repair_id),a.append("type",1),a.append("content",t),this.utils.post(i,a,function(t){e.comments.unshift(t.data)},this.$vux.confirm)},toCommentList:function(){this.$router.push({path:"/comments/"+this.repair_id})},imgShow:function(){this.$el.querySelector(".thumbnail").$vuer.show()},goBack:function(){this.$router.back()}}}),ua=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.reportinfo?i("div",[i("x-header",{attrs:{"left-options":{preventGoBack:!0}},on:{"on-click-back":t.goBack}},[t._v("维修记录详情")]),t._v(" "),t.reportinfo.device?i("device-card",{attrs:{device:t.reportinfo.device}}):t._e(),t._v(" "),i("flexbox",{attrs:{gutter:0}},[t.reporter?i("flexbox-item",{attrs:{span:t.reporterSpan}},[i("div",{staticClass:"placeholder weui-media-box weui-media-box_appmsg"},[i("div",{staticClass:"weui-media-box__hd"},[t.reporter.image?i("img",{staticClass:"weui-media-box__thumb",staticStyle:{"vertical-align":"middle"},attrs:{src:t.reporter.image,alt:""}}):i("i",{staticClass:"weui-media-box__thum weui_icon_circle",staticStyle:{"vertical-align":"middle"}})]),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[t.reporter?i("h4",{staticClass:"weui-media-box__title",domProps:{innerHTML:t._s(t.reporter.user_nick)}}):t._e(),t._v(" "),i("p",{staticClass:"weui-media-box__desc",domProps:{innerHTML:t._s(t.reportinfo.created_at_format)}})])])]):t._e(),t._v(" "),t.assignee&&t.repairinfo?i("flexbox-item",{attrs:{span:.5}},[i("div",{staticClass:"weui-flex__item"},[i("div",{staticClass:"placeholder weui-media-box weui-media-box_appmsg"},[t.assignee?i("div",{staticClass:"weui-media-box__bd",staticStyle:{"text-align":"right"}},[i("h4",{staticClass:"weui-media-box__title",domProps:{innerHTML:t._s(t.assignee.user_nick)}}),t._v(" "),i("p",{staticClass:"weui-media-box__desc",domProps:{innerHTML:t._s(t.repairinfo.created_at_format)}})]):t._e(),t._v(" "),i("div",{staticClass:"weui-media-box__hd",staticStyle:{"margin-right":"0px","margin-left":".8em"}},[t.assignee.image?i("img",{staticClass:"weui-media-box__thumb",staticStyle:{"vertical-align":"middle"},attrs:{src:t.assignee.image,alt:""}}):i("i",{staticClass:"weui-media-box__thum weui_icon_circle",staticStyle:{"vertical-align":"middle"}})])])])]):t._e(),t._v(" "),t.can_accept_report?i("flexbox-item",{attrs:{span:.5}},[i("x-button",{staticClass:"accept-report",attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.acceptReport(e)}}},[t._v("接取")])],1):t._e()],1),t._v(" "),t.demo01_list&&t.demo01_list.length>0?i("div",{directives:[{name:"viewer",rawName:"v-viewer"}],staticStyle:{padding:"15px"}},t._l(t.demo01_list,function(t){return i("img",{staticClass:"thumbnail",attrs:{src:t.img}})}),0):t._e(),t._v(" "),i("article",{staticClass:"weui-article report-desc"},[i("p",{staticStyle:{color:"#999999"}},[t._v("\n      "+t._s(this.reportinfo.description)+"\n    ")])]),t._v(" "),null!==t.reportinfo.real_reporter?i("cell",{attrs:{title:"实际报修人",value:t.reportinfo.real_reporter}}):t._e(),t._v(" "),i("div",{staticClass:"report-status"},[i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",{attrs:{span:.75}},[i("div",{staticStyle:{"padding-left":"15px","padding-right":"15px","vertical-align":"middle"}},[i("a",{staticClass:"device-repair-status",class:{textRed:this.reportinfo.status==this.status_list.new.id,textOrange:this.reportinfo.status==this.status_list.doing.id,textBlue:this.reportinfo.status==this.status_list.canceled.id,textGreen:this.reportinfo.status==this.status_list.repaired.id,textGray:this.reportinfo.status==this.status_list.finished.id}},[t._v("\n             "+t._s(this.reportinfo.status_name)+" \n          ")])])]),t._v(" "),i("flexbox-item",{attrs:{span:.25}},[t.reportinfo.status===this.status_list.doing.id&&t.can_repair?i("x-button",{staticClass:"finish-repair",attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.finishRepair(e)}}},[t._v("完成")]):t._e(),t._v(" "),t.can_close?i("x-button",{staticClass:"finish-report",attrs:{mini:"",type:"primary"},nativeOn:{click:function(e){return t.closeReport(e)}}},[t._v("关闭")]):t._e(),t._v(" "),t.reportinfo.status==this.status_list.finished.id&&t.can_star?i("rater",{attrs:{"font-size":15},model:{value:t.stars,callback:function(e){t.stars=e},expression:"stars"}}):t._e(),t._v(" "),t.reportinfo.status!=this.status_list.finished.id||t.can_star?t._e():i("rater",{attrs:{"font-size":15,disabled:""},nativeOn:{click:function(e){return t.scoreConfim(e)}},model:{value:t.stars,callback:function(e){t.stars=e},expression:"stars"}})],1)],1)],1),t._v(" "),t.comments.length>0?i("view-box",{ref:"viewBox",staticClass:"position-comments-box"},[t._l(t.comments,function(e){return i("div",{key:e.id+"comment",staticClass:"weui-media-box weui-media-box_appmsg"},[e.user.image?i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",staticStyle:{"vertical-align":"middle"},attrs:{src:e.user.image,alt:""}})]):t._e(),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",{attrs:{span:.5}},[i("h4",{staticClass:"weui-media-box__title",domProps:{innerHTML:t._s(e.user.user_nick)}})]),t._v(" "),i("flexbox-item",{attrs:{span:.5}},[i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s(e.created_at_format))])])],1),t._v(" "),i("p",{staticClass:"weui-media-box__desc",domProps:{innerHTML:t._s(e.content)}})],1)])}),t._v(" "),10==t.comments.length?i("div",{staticClass:"more-comment",on:{click:t.toCommentList}},[i("p",{staticClass:"weui-media-box__desc"},[t._v("\n        点击查看更多评论\n      ")])]):t._e()],2):t._e(),t._v(" "),i("button",{attrs:{id:"add-comment"},on:{click:t.clickAddComment}},[t._v("评论")]),t._v(" "),i("br"),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],staticStyle:{left:"50%"}},[i("confirm",{ref:"confirmComment",attrs:{"show-input":"",title:"发送评论"},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirmComment,"on-show":t.onShow,"on-hide":t.onHide},model:{value:t.showAddComment,callback:function(e){t.showAddComment=e},expression:"showAddComment"}}),t._v(" "),i("confirm",{attrs:{"close-on-confirm":!1,title:t.$t("提示"),"show-cancel-button":!1},on:{"on-confirm":t.onConfirm},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(this.error_msg))])])],1)],1):t._e()},da=[],ha={render:ua,staticRenderFns:da},pa=ha,ma=i("VU/8"),fa=x,va=ma(ca,pa,!1,fa,"data-v-612b56cd",null),ga=va.exports,_a=i("qMt5"),wa={name:"Redirect",mounted:function(){var t=/code=(.+[^&])&?/i,e=t.exec(window.location.href);e&&(this.code=e[1]);var i=new FormData;i.append("code",this.code),this.utils.post(this.api.userauth,i,this.login,this.$vux.confirm)},methods:{login:function(t){200===t.code&&t.token&&t.data&&(window.localStorage.setItem("token",t.token),window.localStorage.setItem("user",tt()(t.data))),console.log(this.$store.state.goback),this.$router.push({path:this.$store.state.goback})}},data:function(){return{code:{}}}},xa=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},ba=[],Sa={render:xa,staticRenderFns:ba},ya=Sa,Ca=i("VU/8"),ka=b,$a=Ca(wa,ya,!1,ka,"data-v-191ea1b6",null),Ta=$a.exports,Da=i("rHil"),Ra=i("kbG3"),Va=i("wmxo"),Ba=(Ra.a,String,Boolean,Boolean,String,Number,String,Boolean,Number,Boolean,Array,{name:"x-switch",components:{InlineDesc:Ra.a},computed:{parent:function(){return this.$parent||{}},labelStyle:function(){var t=/<\/?[^>]*>/.test(this.title),e=Math.min(t?5:this.title.length+1,14)+"em";return Object(Va.a)({display:"block",width:this.parent.labelWidth||e,textAlign:this.parent.labelAlign})},labelClass:function(){return{"vux-cell-justify":"justify"===this.parent.labelAlign}}},methods:{onClick:function(){this.$emit("on-click",!this.currentValue,this.currentValue)},toBoolean:function(t){if(this.valueMap){return 1===this.valueMap.indexOf(t)}return t},toRaw:function(t){return this.valueMap?this.valueMap[t?1:0]:t}},props:{title:{type:String,required:!0},disabled:Boolean,value:{type:[Boolean,String,Number],default:!1},inlineDesc:[String,Boolean,Number],preventDefault:Boolean,valueMap:{type:Array,default:function(){return[!1,!0]}}},data:function(){return{currentValue:this.toBoolean(this.value)}},watch:{currentValue:function(t){var e=this.toRaw(t);this.$emit("input",e),this.$emit("on-change",e)},value:function(t){this.currentValue=this.toBoolean(t)}}}),Ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-x-switch weui-cell weui-cell_switch"},[i("div",{staticClass:"weui-cell__bd"},[i("label",{staticClass:"weui-label",class:t.labelClass,style:t.labelStyle,domProps:{innerHTML:t._s(t.title)}}),t._v(" "),t.inlineDesc?i("inline-desc",[t._v(t._s(t.inlineDesc))]):t._e()],1),t._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticClass:"weui-switch",attrs:{type:"checkbox",disabled:t.disabled},domProps:{checked:Array.isArray(t.currentValue)?t._i(t.currentValue,null)>-1:t.currentValue},on:{change:function(e){var i=t.currentValue,a=e.target,n=!!a.checked;if(Array.isArray(i)){var s=t._i(i,null);a.checked?s<0&&(t.currentValue=i.concat([null])):s>-1&&(t.currentValue=i.slice(0,s).concat(i.slice(s+1)))}else t.currentValue=n}}}),t._v(" "),t.preventDefault?i("div",{staticClass:"vux-x-switch-overlay",on:{click:t.onClick}}):t._e()])])},Oa=[],Pa={render:Ia,staticRenderFns:Oa},Fa=Pa,Ea=i("VU/8"),ja=S,Na=Ea(Ba,Fa,!1,ja,null,null),La=Na.exports,Ma=(Se.a,ra.a,Da.a,{name:"device-scan",directives:{TransferDom:Se.a},components:{Confirm:ra.a,Group:Da.a,XSwitch:La},mounted:function(){var t=this;this.$store.state.configFlag?this.checkJsApi():(this.$vux.loading.show({transition:"",text:"..."}),this.initWxConfig()),this.$wechat.ready(function(){t.$store.commit("setConfigFlag"),t.startScanQRCode(),t.$vux.loading.hide()}),this.$wechat.error(function(t){console.log("$wechat config error")})},beforeDestroy:function(){clearInterval(this.timer)},methods:{initWxConfig:function(){var t=this;this.axios.get(Ie.a.jssign+"?url=http://facility.mymicedb.com/device-scan").then(function(e){console.log("getJssign Api",e.data),t.wx_config_data.time_stamp=e.data.data.timestamp,t.wx_config_data.noncestr=e.data.data.nonce_str,t.wx_config_data.signature=e.data.data.signature,t.$wechat.config({beta:!0,debug:!1,appId:"wwa417d520fd30a759",timestamp:t.wx_config_data.time_stamp,nonceStr:t.wx_config_data.noncestr,signature:t.wx_config_data.signature,jsApiList:["scanQRCode"]})})},startScanQRCode:function(){var t=this;t.$wechat.scanQRCode({desc:"scanQRCode desc",needResult:1,scanType:["qrCode","barCode"],success:function(e){/^https?:\/\/(\S[^\/]+)/.exec(e.resultStr)?window.location.href=e.resultStr:(t.scan_result=e.resultStr,t.show4=!0)},error:function(t){t.errMsg.indexOf("function_not_exist")>0&&alert("版本过低请升级")}})},checkJsApi:function(){this.$wechat.checkJsApi({jsApiList:["scanQRCode"],success:function(t){console.log("checkJsApi success",t),alert(t)}})},islink:function(t){var e=new RegExp(/^https?:\/\/(\S[^\/]+)/,"gi"),i=e.exec(t);return i||!1},onConfirm4:function(){var t=this;console.log("on confirm"),this.$vux.loading.show({transition:"",text:"..."}),setTimeout(function(){t.$vux.loading.hide(),t.show4=!1,window.location.reload()},1e3)},showPlugin:function(t){this.show4=!0}},data:function(){return{wx_config_data:{},scan_result:"",show4:!1}}}),Ua=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("confirm",{attrs:{"close-on-confirm":!1,title:t.$t("提示"),"show-cancel-button":!1},on:{"on-confirm":t.onConfirm4},model:{value:t.show4,callback:function(e){t.show4=e},expression:"show4"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(this.scan_result))])])],1)},Aa=[],Ha={render:Ua,staticRenderFns:Aa},qa=Ha,za=i("VU/8"),Wa=y,Ya=za(Ma,qa,!1,Wa,"data-v-44704285",null),Xa=Ya.exports,Ga=i("//Fk"),Ka=i.n(Ga),Ja=(Boolean,String,{name:"load-more",props:{showLoading:{type:Boolean,default:!0},tip:String}}),Qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-loadmore weui-loadmore",class:{"weui-loadmore_line":!t.showLoading,"weui-loadmore_dot":!t.showLoading&&!t.tip}},[t.showLoading?i("i",{staticClass:"weui-loading"}):t._e(),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.tip||!t.showLoading,expression:"tip || !showLoading"}],staticClass:"weui-loadmore__tips"},[t._v(t._s(t.tip))])])},Za=[],tn={render:Qa,staticRenderFns:Za},en=tn,an=i("VU/8"),nn=C,sn=an(Ja,en,!1,nn,null,null),on=sn.exports,rn=1,ln=(St.a,1),cn={components:{XHeader:St.a,LoadMore:on},mounted:function(){var t=this;this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{scrollbarObj:{fade:!0},pullDownRefreshObj:{threshold:50,stop:20},pullUpLoadObj:{threshold:0,txt:{more:"加载更多",noMore:"没有更多数据了"}},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},getData:function(){return new Ka.a(function(t){setTimeout(function(){for(var e=[],i=0;i<10;i++)e.push(ln++);t(e)},1e3)})},onPullingDown:function(){this.loading=!0,console.log("下拉刷新"),this.page=1,this.utils.get(this.api.devices+"?page="+this.page,this.loadData,this.$vux.confirm)},onPullingUp:function(){this.scroll.y<=this.scroll.maxScrollY+50&&(console.log("上拉加载"),this.page++,this.page<=this.maxpage?(this.loading=!0,this.utils.get(this.api.devices+"?page="+this.page,this.addData,this.$vux.confirm)):this.nomore=!0)},addData:function(t){console.log(t);var e=this;this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.$nextTick(function(){e.scroll?e.scroll.refresh():e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj,click:!0}),e.scroll.finishPullDown(),e.loading=!1})},loadData:function(t){var e=this;this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.$nextTick(function(){e.scroll?e.scroll.refresh():e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj,click:!0}),e.scroll.finishPullDown(),e.loading=!1})}}},un=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",[t._v("滚动测试")]),t._v(" "),i("div",{staticClass:"position-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("ul",{staticClass:"content"},[t._l(t.items,function(e){return i("li",[t._v(t._s(e.name))])}),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],2)])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-thin-up icon-red",attrs:{type:"ios-arrow-thin-up",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M349.7 189.8c-3.1 3.1-8 3-11.3 0L264 123.4V408c0 4.4-3.6 8-8 8s-8-3.6-8-8V123.4l-74.4 66.3c-3.4 2.9-8.1 3.2-11.2.1-3.1-3.1-3.3-8.5-.1-11.4 0 0 87-79.2 88-80s2.8-2.4 5.7-2.4 4.9 1.6 5.7 2.4 88 80 88 80c1.5 1.5 2.3 3.6 2.3 5.7s-.8 4.1-2.3 5.7z"}})])])],1)},dn=[],hn={render:un,staticRenderFns:dn},pn=hn,mn=i("VU/8"),fn=k,vn=mn(cn,pn,!1,fn,null,null),gn=vn.exports,_n=1,wn=(St.a,_i.a,wi.a,1),xn={components:{XHeader:St.a,Flexbox:_i.a,FlexboxItem:wi.a},mounted:function(){var t=this;this.object_id=this.$route.params.id,this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{object_id:null,object_type:1,scrollbarObj:{fade:!0},pullDownRefreshObj:{threshold:50,stop:20},pullUpLoadObj:{threshold:0,txt:{more:"加载更多",noMore:"没有更多数据了"}},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},getData:function(){return new Ka.a(function(t){setTimeout(function(){for(var e=[],i=0;i<10;i++)e.push(wn++);t(e)},1e3)})},onPullingDown:function(){console.log("下拉刷新"),this.page=1;var t=this.api.repairComment+"page="+this.page;t+="&object_id="+this.object_id,t+="&object_type="+this.object_type,this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){var t=this.api.repairComment+"page="+this.page;t+="&object_id="+this.object_id,t+="&object_type="+this.object_type,console.log(this.page),this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t);var e=this;this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.$nextTick(function(){e.scroll?e.scroll.refresh():e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj}),e.scroll.finishPullDown()})},loadData:function(t){var e=this;this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.$nextTick(function(){e.scroll?e.scroll.refresh():e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj}),e.scroll.finishPullDown()})}}},bn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",[t._v("全部列表")]),t._v(" "),i("div",{staticClass:"position-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"content"},[t._l(t.items,function(e){return i("div",{key:e.id+"comment",staticClass:"weui-media-box weui-media-box_appmsg"},[e.user.image?i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",staticStyle:{"vertical-align":"middle"},attrs:{src:e.user.image,alt:""}})]):t._e(),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",{attrs:{span:.5}},[i("h4",{staticClass:"weui-media-box__title",domProps:{innerHTML:t._s(e.user.user_nick)}})]),t._v(" "),i("flexbox-item",{attrs:{span:.5}},[i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s(e.created_at_format))])])],1),t._v(" "),i("p",{staticClass:"weui-media-box__desc",domProps:{innerHTML:t._s(e.content)}})],1)])}),t._v(" "),t.nomore?i("div",{staticClass:"no-more weui-media-box__desc"},[t._v("没有更多数据了")]):t._e()],2),t._v(" "),i("div",{staticClass:"loading-wrapper"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-thin-up icon-red",attrs:{type:"ios-arrow-thin-up",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M349.7 189.8c-3.1 3.1-8 3-11.3 0L264 123.4V408c0 4.4-3.6 8-8 8s-8-3.6-8-8V123.4l-74.4 66.3c-3.4 2.9-8.1 3.2-11.2.1-3.1-3.1-3.3-8.5-.1-11.4 0 0 87-79.2 88-80s2.8-2.4 5.7-2.4 4.9 1.6 5.7 2.4 88 80 88 80c1.5 1.5 2.3 3.6 2.3 5.7s-.8 4.1-2.3 5.7z"}})])])],1)},Sn=[],yn={render:bn,staticRenderFns:Sn},Cn=yn,kn=i("VU/8"),$n=$,Tn=kn(xn,Cn,!1,$n,null,null),Dn=Tn.exports,Rn=(Qe.b,Number,{name:"button-tab",mixins:[Qe.b],props:{height:Number}}),Vn=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-button-group"},[t._t("default")],2)},Bn=[],In={render:Vn,staticRenderFns:Bn},On=In,Pn=i("VU/8"),Fn=T,En=Pn(Rn,On,!1,Fn,null,null),jn=En.exports,Nn=(Qe.a,{name:"button-tab-item",mixins:[Qe.a],computed:{classes:function(){return{"vux-button-group-current":this.currentIndex===this.$parent.currentIndex,"vux-button-tab-item-first":0===this.currentIndex,"vux-button-tab-item-last":this.currentIndex===this.$parent.$children.length-1,"vux-button-tab-item-middle":this.currentIndex>0&&this.currentIndex!==this.$parent.$children.length-1}},style:function(){if(this.$parent.height)return{height:this.$parent.height+"px",lineHeight:this.$parent.height+"px"}}}}),Ln=function(){var t=this,e=t.$createElement;return(t._self._c||e)("a",{staticClass:"vux-button-tab-item",class:t.classes,style:t.style,attrs:{href:"javascript:"},on:{click:t.onItemClick}},[t._t("default")],2)},Mn=[],Un={render:Ln,staticRenderFns:Mn},An=Un,Hn=i("VU/8"),qn=Hn(Nn,An,!1,null,null,null),zn=qn.exports,Wn=(St.a,{components:{XHeader:St.a,LoadMore:on,Tab:ri,TabItem:fi,ButtonTab:jn,ButtonTabItem:zn},mounted:function(){var t=this;this.TOKEN=window.localStorage.getItem("token"),this.USER=JSON.parse(window.localStorage.getItem("user")),this.USER||this.utils.deletaUserData(),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928",tabmodel:0,statusList:[{key:-1,name:"全部"},{key:0,name:"新建"},{key:1,name:"处理中"},{key:3,name:"完成修理"},{key:4,name:"已完成"}],defaultStatus:0,currentStatus:-1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.reportList+"?page="+this.page;t+="&user_id="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.reportList+"?page="+this.page;t+="&user_id="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})},toMyReports:function(){},toMyRepairs:function(){},toMyMaintains:function(){},changeStatus:function(){0===this.defaultStatus&&(this.currentStatus=-1),1===this.defaultStatus&&(this.currentStatus=0),2===this.defaultStatus&&(this.currentStatus=1),3===this.defaultStatus&&(this.currentStatus=3),4===this.defaultStatus&&(this.currentStatus=4),this.onPullingDown()}}}),Yn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"page panel"},[i("div",{staticClass:"page__hd"},[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("我的报修")]),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("button-tab",{model:{value:t.defaultStatus,callback:function(e){t.defaultStatus=e},expression:"defaultStatus"}},t._l(t.statusList,function(e){return i("button-tab-item",{key:e.key,on:{"on-item-click":function(e){return t.changeStatus()}}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("div",{staticClass:"page__bd"},[i("div",{staticClass:"position-report-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.items,function(e){return i("a",{key:e.id,staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"/repair-detail/"+e.id}},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:e.image_list.length>0?e.image_list[0]:t.defaultImage,alt:""}})]),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("h4",{staticClass:"weui-media-box__title"},[t._v(t._s(e.description))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc",staticStyle:{padding:"5px 0px"}},[t._v(t._s(e.created_at_format)+"   "),i("span",{staticClass:"device-repair-status",class:{textRed:0==e.status,textOrange:1==e.status,textBlue:2==e.status,textGreen:3==e.status,textGray:4==e.status}},[t._v("\n                     "+t._s(e.status_name)+" \n                  ")])])])])}),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],2)])])]),t._v(" "),i("div",{staticClass:"page__ft"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])])},Xn=[],Gn={render:Yn,staticRenderFns:Xn},Kn=Gn,Jn=i("VU/8"),Qn=D,Zn=Jn(Wn,Kn,!1,Qn,"data-v-0bc16e11",null),ts=Zn.exports,es=i("32ER"),is=i("OpNH"),as=(St.a,is.a,Da.a,la.a,es.a,{components:{XHeader:St.a,LoadMore:on,Tab:ri,TabItem:fi,DeviceMaintainItem:is.a,Group:Da.a,Cell:la.a,CellBox:es.a,ButtonTab:jn,ButtonTabItem:zn},mounted:function(){var t=this;this.TOKEN=window.localStorage.getItem("token"),this.USER=JSON.parse(window.localStorage.getItem("user")),this.USER||this.utils.deletaUserData(),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928",tabmodel:0,statusList:[{key:-1,name:"全部"},{key:1,name:"处理中"},{key:3,name:"已完成"}],defaultStatus:0,currentStatus:-1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.maintain+"?page="+this.page;t+="&user_id="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.maintain+"?page="+this.page;t+="&user_id="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})},toMyReports:function(){this.$router.push({path:"/myreports"})},toMyRepairs:function(){this.$router.push({path:"/myrepairs"})},toMyMaintains:function(){},changeStatus:function(){0===this.defaultStatus&&(this.currentStatus=-1),1===this.defaultStatus&&(this.currentStatus=1),2===this.defaultStatus&&(this.currentStatus=3),this.onPullingDown()}}}),ns=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"page panel"},[i("div",{staticClass:"page__hd"},[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("维护任务")]),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("button-tab",{model:{value:t.defaultStatus,callback:function(e){t.defaultStatus=e},expression:"defaultStatus"}},t._l(t.statusList,function(e){return i("button-tab-item",{key:e.key,on:{"on-item-click":function(e){return t.changeStatus()}}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("div",{staticClass:"page__bd"},[i("div",{staticClass:"position-report-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[i("group",{staticStyle:{height:"100%","overflow-y":"scroll"},attrs:{gutter:0}},t._l(t.items,function(t){return i("cell-box",{key:t.id+"maintain",attrs:{link:"/maintain-detail/"+t.id,"is-link":""}},[i("device-maintain-item",{attrs:{maintain:t}})],1)}),1),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],1)])])]),t._v(" "),i("div",{staticClass:"page__ft"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])])},ss=[],os={render:ns,staticRenderFns:ss},rs=os,ls=i("VU/8"),cs=R,us=ls(as,rs,!1,cs,"data-v-6258f979",null),ds=us.exports,hs=(St.a,{components:{XHeader:St.a,LoadMore:on,Tab:ri,TabItem:fi,ButtonTab:jn,ButtonTabItem:zn},mounted:function(){var t=this;this.$store.commit("setGoback","myrepairs"),this.TOKEN=window.localStorage.getItem("token"),this.USER=JSON.parse(window.localStorage.getItem("user")),this.USER||this.utils.deletaUserData(),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928",tabmodel:0,statusList:[{key:-1,name:"全部"},{key:1,name:"新建"},{key:3,name:"已完成"}],defaultStatus:0,currentStatus:-1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.repairList+"?page="+this.page;t+="&assignee="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(++this.page<=this.maxpage){this.loading=!0;var t=this.api.repairList+"?page="+this.page;t+="&assignee="+this.USER.id,this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})},toMyReports:function(){this.$router.push({path:"/myreports"})},toMyRepairs:function(){},toMyMaintains:function(){this.$router.push({path:"/mymaintains"})},changeStatus:function(){0===this.defaultStatus&&(this.currentStatus=-1),1===this.defaultStatus&&(this.currentStatus=1),2===this.defaultStatus&&(this.currentStatus=3),this.onPullingDown()}}}),ps=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"page panel"},[i("div",{staticClass:"page__hd"},[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("维修任务")]),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("button-tab",{model:{value:t.defaultStatus,callback:function(e){t.defaultStatus=e},expression:"defaultStatus"}},t._l(t.statusList,function(e){return i("button-tab-item",{key:e.key,on:{"on-item-click":function(e){return t.changeStatus()}}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("div",{staticClass:"page__bd"},[i("div",{staticClass:"position-report-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.items,function(e){return i("a",{key:e.id,staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"/repair-detail/"+e.report_id}},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:e.device.image_list.length>0?e.device.image_list[0]:t.defaultImage,alt:""}})]),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("h4",{staticClass:"weui-media-box__title"},[t._v(t._s(e.device.name))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc",staticStyle:{padding:"5px 0px"}},[t._v(t._s(e.end_time_format)+"   "),i("span",{staticClass:"device-repair-status",class:{textOrange:1==e.status,textBlue:2==e.status,textGreen:3==e.status}},[t._v("\n                     "+t._s(e.status_name)+" \n                  ")])])])])}),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],2)])])]),t._v(" "),i("div",{staticClass:"page__ft"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])])},ms=[],fs={render:ps,staticRenderFns:ms},vs=fs,gs=i("VU/8"),_s=V,ws=gs(hs,vs,!1,_s,"data-v-0522e318",null),xs=ws.exports,bs=(St.a,{components:{XHeader:St.a,LoadMore:on,Tab:ri,TabItem:fi},mounted:function(){var t=this;this.TOKEN=window.localStorage.getItem("token"),this.USER=JSON.parse(window.localStorage.getItem("user")),this.USER||this.utils.deletaUserData(),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928",tabmodel:0}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.reportList+"?page="+this.page;this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.reportList+"?page="+this.page;this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})}}}),Ss=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"page panel"},[i("div",{staticClass:"page__hd"},[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("报修列表")])],1),t._v(" "),i("div",{staticClass:"page__bd"},[i("div",{staticClass:"position-report-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.items,function(e){return i("a",{key:e.id,staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"/repair-detail/"+e.id}},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:e.image_list.length>0?e.image_list[0]:t.defaultImage,alt:""}})]),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("h4",{staticClass:"weui-media-box__title"},[t._v(t._s(e.description))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v("报修人："+t._s(e.user.user_nick))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc",staticStyle:{padding:"5px 0px"}},[t._v("时间："+t._s(e.created_at_format)+"   ")]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v("状态："),i("span",{staticClass:"device-repair-status",class:{textRed:0==e.status,textOrange:1==e.status,textBlue:2==e.status,textGreen:3==e.status,textGray:4==e.status}},[t._v("\n                    "+t._s(e.status_name)+" \n                  ")])])])])}),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],2)])])]),t._v(" "),i("div",{staticClass:"page__ft"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])])},ys=[],Cs={render:Ss,staticRenderFns:ys},ks=Cs,$s=i("VU/8"),Ts=B,Ds=$s(bs,ks,!1,Ts,"data-v-42eb6298",null),Rs=Ds.exports,Vs=i("SqFc"),Bs=(Object,{name:"DeviceBar",components:{Tab:ri,TabItem:fi},props:{index:0,device:Object},data:function(){return{model:0}},methods:{toDeviceInfo:function(){1!==this.index&&this.device&&this.$router.push({path:"/device/"+this.device.id})},toDeviceReports:function(){2!==this.index&&this.device&&this.$router.push({path:"/device-reports/"+this.device.id})},toDeviceMaintains:function(){3!==this.index&&this.device&&this.$router.push({path:"/device-maintains/"+this.device.id})}}}),Is=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("tab",{attrs:{"line-width":2,"active-color":"#04be02",animate:!1},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[i("tab-item",{attrs:{selected:1===t.index},nativeOn:{click:function(e){return t.toDeviceInfo(e)}}},[t._v("详细信息")]),t._v(" "),i("tab-item",{attrs:{selected:2===t.index},nativeOn:{click:function(e){return t.toDeviceReports(e)}}},[t._v("维修记录")]),t._v(" "),i("tab-item",{attrs:{selected:3===t.index},nativeOn:{click:function(e){return t.toDeviceMaintains(e)}}},[t._v("维护记录")])],1)],1)},Os=[],Ps={render:Is,staticRenderFns:Os},Fs=Ps,Es=i("VU/8"),js=Es(Bs,Fs,!1,null,null,null),Ns=js.exports,Ls=(St.a,Ki.a,Vs.default,{name:"DevicePage",components:{XHeader:St.a,LoadMore:on,DeviceCard:Ki.a,DeviceInfo:Vs.default,DeviceBar:Ns},data:function(){return{index:0,selected:"详细信息",device:null}},mounted:function(){this.getDevice()},methods:{getDevice:function(){var t=Ie.a.detail+this.$route.params.id;this.utils.get(t,this.setDevice,this.$vux.confirm)},setDevice:function(t){this.device=t.data}}}),Ms=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("div",[i("x-header",[t._v("设备管理")]),t._v(" "),i("device-card",{attrs:{device:t.device}}),t._v(" "),i("div",[i("device-bar",{attrs:{device:t.device,index:1}}),t._v(" "),i("div",{staticClass:"position-device-box"},[i("device-info",{ref:"wrapper",staticClass:"wrapper",attrs:{device:t.device}})],1)],1),t._v(" "),i("router-link",{attrs:{to:{path:"/add-repair",query:{device_id:t.device.id}}}},[i("button",{staticClass:"add-repair weui_btn weui_btn_primary",attrs:{id:"add-repair"}},[t._v("报修")])])],1):t._e()},Us=[],As={render:Ms,staticRenderFns:Us},Hs=As,qs=i("VU/8"),zs=I,Ws=qs(Ls,Hs,!1,zs,"data-v-cca34264",null),Ys=Ws.exports,Xs=(St.a,Ki.a,{name:"DeviceReports",components:{XHeader:St.a,LoadMore:on,DeviceCard:Ki.a,DeviceBar:Ns},data:function(){return{index:0,selected:"详细信息",device:null,loading:!1,nomore:!1,items:[],pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,scroll:scroll,maxpage:0,page:1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928"}},mounted:function(){this.getDevice()},methods:{getDevice:function(){var t=this.api.detail+this.$route.params.id;this.utils.get(t,this.setDevice,this.$vux.confirm)},setDevice:function(t){var e=this;this.device=t.data,this.$nextTick(function(){e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj,click:!0}),e.onPullingDown(),e.scroll.on("pullingDown",e.onPullingDown),e.scroll.on("scrollEnd",e.onPullingUp)})},scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.repair+this.device.id+"&page="+this.page;this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.repair+this.device.id+"&page="+this.page;this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})}}}),Gs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("div",[i("x-header",[t._v("设备管理")]),t._v(" "),i("device-card",{attrs:{device:t.device}}),t._v(" "),i("div",[i("device-bar",{attrs:{device:t.device,index:2}}),t._v(" "),i("div",{staticClass:"position-reports-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[t._l(t.items,function(e){return i("a",{key:e.id,staticClass:"weui-media-box weui-media-box_appmsg",attrs:{href:"/repair-detail/"+e.id}},[i("div",{staticClass:"weui-media-box__hd"},[i("img",{staticClass:"weui-media-box__thumb",attrs:{src:e.image_list.length>0?e.image_list[0]:t.defaultImage,alt:""}})]),t._v(" "),i("div",{staticClass:"weui-media-box__bd"},[i("h4",{staticClass:"weui-media-box__title"},[t._v(t._s(e.description))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc",staticStyle:{padding:"5px 0px"}},[t._v(t._s(e.created_at_format)+"   "),i("span",{staticClass:"device-repair-status",class:{textRed:0==e.status,textOrange:1==e.status,textBlue:2==e.status,textGreen:3==e.status,textGray:4==e.status}},[t._v("\n                 "+t._s(e.status_name)+" \n              ")])])])])}),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],2)])])],1),t._v(" "),i("router-link",{attrs:{to:{path:"/add-repair",query:{device_id:t.device.id}}}},[i("button",{staticClass:"add-repair weui_btn weui_btn_primary",attrs:{id:"add-repair"}},[t._v("报修")])])],1):t._e()},Ks=[],Js={render:Gs,staticRenderFns:Ks},Qs=Js,Zs=i("VU/8"),to=O,eo=Zs(Xs,Qs,!1,to,"data-v-aee06afe",null),io=eo.exports,ao=(St.a,Ki.a,Da.a,la.a,es.a,is.a,{name:"DeviceMaintains",components:{XHeader:St.a,LoadMore:on,DeviceCard:Ki.a,DeviceBar:Ns,Group:Da.a,Cell:la.a,CellBox:es.a,DeviceMaintainItem:is.a},data:function(){return{index:2,selected:"维护记录",device:null,loading:!1,nomore:!1,items:[],pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,scroll:scroll,maxpage:0,page:1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928"}},mounted:function(){this.getDevice()},methods:{getDevice:function(){var t=this.api.detail+this.$route.params.id;this.utils.get(t,this.setDevice,this.$vux.confirm)},setDevice:function(t){var e=this;this.device=t.data,this.$nextTick(function(){e.scroll=new ye.a(e.$refs.wrapper,{pullDownRefresh:e.pullDownRefreshObj,click:!0}),e.onPullingDown(),e.scroll.on("pullingDown",e.onPullingDown),e.scroll.on("scrollEnd",e.onPullingUp)})},scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.maintain+"?device_id="+this.device.id;t+="&page="+this.page,this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.maintain+"?device_id="+this.device.id;t+="&page="+this.page,this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})}}}),no=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("div",[i("x-header",[t._v("设备管理")]),t._v(" "),i("device-card",{attrs:{device:t.device}}),t._v(" "),i("div",[i("device-bar",{attrs:{device:t.device,index:3}}),t._v(" "),i("div",{staticClass:"position-maintains-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[i("group",{staticStyle:{height:"100%","overflow-y":"scroll"},attrs:{gutter:0}},t._l(t.items,function(t){return i("cell-box",{key:t.id+"maintain",attrs:{link:"/maintain-detail/"+t.id,"is-link":""}},[i("device-maintain-item",{attrs:{maintain:t}})],1)}),1),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],1)])])],1),t._v(" "),i("router-link",{attrs:{to:{path:"/add-repair",query:{device_id:t.device.id}}}},[i("button",{staticClass:"add-repair weui_btn weui_btn_primary",attrs:{id:"add-repair"}},[t._v("报修")])])],1):t._e()},so=[],oo={render:no,staticRenderFns:so},ro=oo,lo=i("VU/8"),co=P,uo=lo(ao,ro,!1,co,"data-v-7d841e49",null),ho=uo.exports,po=(St.a,is.a,Da.a,la.a,es.a,{components:{XHeader:St.a,LoadMore:on,Tab:ri,TabItem:fi,DeviceMaintainItem:is.a,Group:Da.a,Cell:la.a,CellBox:es.a,ButtonTab:jn,ButtonTabItem:zn},mounted:function(){var t=this;this.TOKEN=window.localStorage.getItem("token"),this.USER=JSON.parse(window.localStorage.getItem("user")),this.USER||this.utils.deletaUserData(),this.$nextTick(function(){t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.onPullingDown(),t.scroll.on("pullingDown",t.onPullingDown),t.scroll.on("scrollEnd",t.onPullingUp)})},data:function(){return{pullDownRefreshObj:{threshold:50,stop:20},startY:0,scrollToX:0,scrollToY:0,scrollToTime:700,items:[],scroll:scroll,page:1,maxpage:0,nomore:!1,loading:!1,defaultImage:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/20190321eec5375f7c984d813051c65f202ca928",tabmodel:0,statusList:[{key:-1,name:"全部"},{key:1,name:"处理中"},{key:3,name:"已完成"}],defaultStatus:0,currentStatus:-1}},methods:{scrollTo:function(){this.scroll.scrollTo(this.scrollToX,this.scrollToY,this.scrollToTime)},onPullingDown:function(){this.loading=!0,this.page=1;var t=this.api.maintain+"?page="+this.page;this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.loadData,this.$vux.confirm)},onPullingUp:function(){if(this.scroll.y<=this.scroll.maxScrollY+50)if(console.log("上拉加载"),++this.page<=this.maxpage){this.loading=!0;var t=this.api.maintain+"?page="+this.page;this.currentStatus>=0&&(t+="&status="+this.currentStatus),this.utils.get(t,this.addData,this.$vux.confirm)}else this.nomore=!0},addData:function(t){console.log(t),this.items=this.items.concat(t.data),t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},loadData:function(t){this.items=t.data,t.pagination.totalCount>0&&t.pagination.defaultPageSize&&(this.maxpage=Math.ceil(t.pagination.totalCount/t.pagination.defaultPageSize)),console.log(this.maxpage),this.refreshScroll()},refreshScroll:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new ye.a(t.$refs.wrapper,{pullDownRefresh:t.pullDownRefreshObj,click:!0}),t.scroll.finishPullDown(),t.loading=!1})},changeStatus:function(){0===this.defaultStatus&&(this.currentStatus=-1),1===this.defaultStatus&&(this.currentStatus=1),2===this.defaultStatus&&(this.currentStatus=3),this.onPullingDown()}}}),mo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"container"},[i("div",{staticClass:"page panel"},[i("div",{staticClass:"page__hd"},[i("x-header",{attrs:{"left-options":{showBack:!1}}},[t._v("所有维护")]),t._v(" "),i("div",{staticStyle:{padding:"8px"}},[i("button-tab",{model:{value:t.defaultStatus,callback:function(e){t.defaultStatus=e},expression:"defaultStatus"}},t._l(t.statusList,function(e){return i("button-tab-item",{key:e.key,on:{"on-item-click":function(e){return t.changeStatus()}}},[t._v(t._s(e.name))])}),1)],1)],1),t._v(" "),i("div",{staticClass:"page__bd"},[i("div",{staticClass:"position-report-box"},[i("div",{ref:"wrapper",staticClass:"wrapper"},[i("div",{staticClass:"weui-panel__bd"},[i("group",{staticStyle:{height:"100%","overflow-y":"scroll"},attrs:{gutter:0}},t._l(t.items,function(t){return i("cell-box",{key:t.id+"maintain",attrs:{link:"/maintain-detail/"+t.id,"is-link":""}},[i("device-maintain-item",{attrs:{maintain:t}})],1)}),1),t._v(" "),t.loading?i("load-more",{attrs:{tip:"正在加载","background-color":"#fbf9fe"}}):t._e(),t._v(" "),t.nomore?i("load-more",{attrs:{"show-loading":!1,tip:"没有更多数据了","background-color":"#fbf9fe"}}):t._e()],1)])])]),t._v(" "),i("div",{staticClass:"page__ft"})])]),t._v(" "),i("button",{staticClass:"go-top weui_btn weui_btn_primary",on:{click:t.scrollTo}},[t._v("↑")])])},fo=[],vo={render:mo,staticRenderFns:fo},go=vo,_o=i("VU/8"),wo=F,xo=_o(po,go,!1,wo,"data-v-097d7df3",null),bo=xo.exports;E.a.use(L.a);var So=[{path:"/devices",name:"devices",component:Ue},{path:"/",name:"Home",component:ht},{path:"/device-view/:id",name:"device-view",component:Vi},{path:"/maintain-detail/:id",name:"maintain-detail",component:sa},{path:"/repair-detail/:id",name:"repair-detail",component:ga},{path:"/add-repair",name:"add-repair",component:_a.a},{path:"/redirect",name:"redirect",component:Ta},{path:"/device-scan",name:"device-scan",component:Xa},{path:"/comments/:id",name:"comments",component:Dn},{path:"/myreports",name:"myreports",component:ts},{path:"/myrepairs",name:"myrepairs",component:xs},{path:"/mymaintains",name:"mymaintains",component:ds},{path:"/device/:id",name:"device",component:Ys},{path:"/device-reports/:id",name:"device-reports",component:io},{path:"/device-maintains/:id",name:"device-maintains",component:ho},{path:"/reports",name:"reports",component:Rs},{path:"/testscoll",name:"testscoll",component:gn},{path:"/maintains",name:"maintains",component:bo}],yo=new L.a({mode:"history",routes:So}),Co=i("n6Wb"),ko=i("R3Rq"),$o=i("NXWw"),To=i("Peep"),Do=i("Y+qm"),Ro=i("NYxO"),Vo=i("kmDT");E.a.use(Ro.a);var Bo=new Ro.a.Store({state:{configFlag:!1,selected:"详细信息",currentRepair:{},goback:"/"},modules:{i18n:Vo.a.store},mutations:{setConfigFlag:function(t){t.configFlag=!0},setSelected:function(t,e){t.selected=e},setCurrentRepair:function(t,e){t.currentRepair=e},setGoback:function(t,e){t.goback=e}}}),Io=Bo,Oo={getData:function(){return[{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"1d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"},{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"2d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"},{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"3d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"},{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"4d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"},{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"5d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"},{filename:"d5a9486e8c261137b22bc1aee5d1410f.png",filekey:"6d5a9486e8c261137b22bc1aee5d1410f.png",fileurl:"http://lams-1257122319.cos.ap-beijing.myqcloud.com/d5a9486e8c261137b22bc1aee5d1410f.png"}]}},Po=Oo,Fo=i("0xDb"),Eo=i("EAZf"),jo=i.n(Eo),No=this;E.a.use(jo.a),E.a.use(Po),E.a.use(To.a),E.a.use($o.a),E.a.use(Do.a),E.a.use(Co.a),E.a.use(Q.a,K.a),E.a.use(L.a),E.a.use(Vo.a.plugin,Io),E.a.use(ko.a),/zh/.test(E.a.locale.get())?E.a.i18n.set("zh-CN"):E.a.i18n.set("en"),N.a.attach(document.body),E.a.config.productionTip=!1,E.a.prototype.USER=null,E.a.prototype.TOKEN=null,E.a.prototype.utils=Fo.a,E.a.prototype.api=Ie.a;var Lo=function(t,e){alert(e),alert(t)};E.a.config.errorHandler=Lo,E.a.prototype.$throw=function(t){return Lo(t,No)},new E.a({router:yo,store:Io,render:function(t){return t(X)}}).$mount("#app")},Ngll:function(t,e){},NxQa:function(t,e){},OgSk:function(t,e){},OpNH:function(t,e,i){"use strict";function a(t){i("dKod")}var n=i("e66H"),s=(n.a,Object,{name:"DeviceMaintainList",components:{Rater:n.a},data:function(){return{}},props:{maintain:Object},computed:{toLink:function(){return"/device-maintains/"+this.maintain.device.id}},methods:{onConfirm:function(){event.stopPropagation(),this.maintain&&this.maintain.id>0&&1===this.maintain.status&&this.$vux.confirm.show({title:"提示",content:"确认完成？",onCancel:this.onCancel,onConfirm:this.finishMaintain})},onCancel:function(){event.stopPropagation()},finishMaintain:function(){event.stopPropagation();var t=this;if(t.maintain&&t.maintain.id>0&&1===t.maintain.status){var e=window.localStorage.getItem("token"),i=t.api.finishPlan+"?id="+t.maintain.id+"&token="+e;t.utils.get(i,function(e){if(200===e.code){var i=e.data;t.maintain.status=i.status,t.maintain.status_name=i.status_name}},t.$vux.confirm)}}}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"5px",width:"100%",height:"100%"}},[i("div",{staticClass:"weui-media-box__bd"},[i("div",{staticClass:"weui-media-box__title",staticStyle:{color:"#333"}},[t._v("\n      "+t._s(this.maintain.name)+"    \n      "),i("a",{staticClass:"device-maintain-status",class:{textRed:1==this.maintain.status,textOrange:2==this.maintain.status,textGreen:3==this.maintain.status},on:{click:function(e){return e.stopPropagation(),t.onConfirm(e)}}},[t._v("\n         "+t._s(this.maintain.status_name)+" \n      ")])]),t._v(" "),this.maintain.device?i("div",{staticClass:"weui-media-box__title",staticStyle:{"margin-top":"5px"}},[i("a",{attrs:{href:t.toLink}},[t._v("设备："+t._s(this.maintain.device.name))])]):t._e(),t._v(" "),this.maintain.device?i("div",{staticClass:"weui-media-box__desc",staticStyle:{"margin-top":"5px"}},[i("a",[t._v("位置："+t._s(this.maintain.device.position))])]):t._e(),t._v(" "),this.maintain.user?i("div",{staticClass:"weui-media-box__desc",staticStyle:{"margin-top":"5px"}},[i("a",[t._v("负责人："+t._s(this.maintain.user.user_nick))]),t._v(" "),1==this.maintain.status?i("a",{staticStyle:{position:"absolute",left:"40%"}},[t._v("开始时间："+t._s(this.maintain.pre_end_time_format))]):t._e(),t._v(" "),3==this.maintain.status?i("a",{staticStyle:{position:"absolute",left:"40%"}},[t._v("完成时间："+t._s(this.maintain.end_time_format))]):t._e(),t._v(" "),2==this.maintain.status?i("a",{staticStyle:{position:"absolute",left:"40%"}},[t._v("取消时间："+t._s(this.maintain.end_time_format))]):t._e()]):t._e()])])},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,"data-v-3671f254",null);e.a=h.exports},QX3Y:function(t,e){},RMDY:function(t,e){},SqFc:function(t,e,i){"use strict";function a(t){i("H56V")}Object.defineProperty(e,"__esModule",{value:!0});var n=(Object,{name:"DeviceInfo",props:{device:Object}}),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.device.description?i("div",{staticClass:"device-description"},[t._v(t._s(t.device.description))]):t._e(),t._v(" "),i("div",{staticClass:"weui-form-preview__bd"},[t.device.owner.user_nick?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("创建者")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.device.owner.user_nick))])]):t._e(),t._v(" "),t.device.position?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("当前位置")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.device.position))])]):t._e(),t._v(" "),t.device.product_at_format?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("出厂时间")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.device.product_at_format))])]):t._e(),t._v(" "),t.device.contact?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("联系人")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.device.contact))])]):t._e(),t._v(" "),t.device.contact_number?i("p",[i("label",{staticClass:"weui-form-preview__label"},[t._v("联系电话")]),t._v(" "),i("span",{staticClass:"weui-form-preview__value"},[t._v(t._s(t.device.contact_number))])]):t._e()])])},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,"data-v-0cd78dea",null);e.default=d.exports},WDiO:function(t,e){},YxJB:function(t,e,i){"use strict";function a(t){i("cqo/")}var n=(Number,String,String,String,String,String,{name:"flexbox",props:{gutter:{type:Number,default:8},orient:{type:String,default:"horizontal"},justify:String,align:String,wrap:String,direction:String},computed:{styles:function(){return{"justify-content":this.justify,"-webkit-justify-content":this.justify,"align-items":this.align,"-webkit-align-items":this.align,"flex-wrap":this.wrap,"-webkit-flex-wrap":this.wrap,"flex-direction":this.direction,"-webkit-flex-direction":this.direction}}}}),s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-flexbox",class:{"vux-flex-col":"vertical"===t.orient,"vux-flex-row":"horizontal"===t.orient},style:t.styles},[t._t("default")],2)},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,null,null);e.a=d.exports},ZUNL:function(t,e){},aiyf:function(t,e){},"b+jt":function(t,e,i){"use strict";var a={name:"swiper-item",mounted:function(){var t=this;this.$nextTick(function(){t.$parent.rerender()})},beforeDestroy:function(){var t=this.$parent;this.$nextTick(function(){t.rerender()})}},n=function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vux-swiper-item"},[t._t("default")],2)},s=[],o={render:n,staticRenderFns:s},r=o,l=i("VU/8"),c=l(a,r,!1,null,null,null);e.a=c.exports},"cqo/":function(t,e){},d1Im:function(t,e){},dKod:function(t,e){},e66H:function(t,e,i){"use strict";function a(t){i("mfyC")}var n=(Number,Number,Number,String,Boolean,String,String,Number,Number,{name:"rater",created:function(){this.currentValue=parseFloat(this.value)},mounted:function(){this.updateStyle()},props:{min:{type:Number,default:0},max:{type:Number,default:5},value:{type:[Number,String],default:0},disabled:Boolean,star:{type:String,default:"★"},activeColor:{type:String,default:"#fc6"},margin:{type:Number,default:2},fontSize:{type:Number,default:25}},computed:{sliceValue:function(){var t=this.currentValue.toFixed(2).split(".");return 1===t.length?[t[0],0]:t},cutIndex:function(){return 1*this.sliceValue[0]},cutPercent:function(){return 1*this.sliceValue[1]}},methods:{handleClick:function(t,e){this.disabled&&!e||(this.currentValue===t+1?(this.currentValue=t<this.min?this.min:t,this.updateStyle()):this.currentValue=t+1<this.min?this.min:t+1)},updateStyle:function(){for(var t=0;t<this.max;t++)t<=this.currentValue-1?this.$set(this.colors,t,this.activeColor):this.$set(this.colors,t,"#ccc")}},data:function(){return{colors:[],currentValue:0}},watch:{currentValue:function(t){this.updateStyle(),this.$emit("input",t)},value:function(t){this.currentValue=t}}}),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-rater"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],staticStyle:{display:"none"},domProps:{value:t.currentValue},on:{input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}),t._v(" "),t._l(t.max,function(e){return i("a",{staticClass:"vux-rater-box",class:{"is-active":t.currentValue>e-1},style:{color:t.colors&&t.colors[e-1]?t.colors[e-1]:"#ccc",marginRight:t.margin+"px",fontSize:t.fontSize+"px",width:t.fontSize+"px",height:t.fontSize+"px",lineHeight:t.fontSize+"px"},on:{click:function(i){return t.handleClick(e-1)}}},[i("span",{staticClass:"vux-rater-inner"},[i("span",{domProps:{innerHTML:t._s(t.star)}}),t.cutPercent>0&&t.cutIndex===e-1?i("span",{staticClass:"vux-rater-outer",style:{color:t.activeColor,width:t.cutPercent+"%"},domProps:{innerHTML:t._s(t.star)}}):t._e()])])})],2)},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,null,null);e.a=d.exports},fBcm:function(t,e,i){"use strict";function a(t){i("d1Im")}var n=i("mvHQ"),s=i.n(n),o=i("NjrX"),r=i("0FxO"),l=(Array,String,Boolean,Boolean,String,String,Boolean,Boolean,Number,Number,Number,String,Number,Number,Number,{name:"swiper",created:function(){this.index=this.value||0,this.index&&(this.current=this.index)},mounted:function(){var t=this;this.hasTwoLoopItem(),this.$nextTick(function(){t.list&&0===t.list.length||t.render(t.index),t.xheight=t.getHeight(),t.$emit("on-get-height",t.xheight)})},methods:{hasTwoLoopItem:function(){2===this.list.length&&this.loop?this.listTwoLoopItem=this.list:this.listTwoLoopItem=[]},clickListItem:function(t){Object(r.a)(t.url,this.$router),this.$emit("on-click-list-item",JSON.parse(s()(t)))},buildBackgroundUrl:function(t){return t.fallbackImg?"url("+t.img+"), url("+t.fallbackImg+")":"url("+t.img+")"},render:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.swiper&&this.swiper.destroy(),this.swiper=new o.a({container:this.$el,direction:this.direction,auto:this.auto,loop:this.loop,interval:this.interval,threshold:this.threshold,duration:this.duration,height:this.height||this._height,minMovingDistance:this.minMovingDistance,imgList:this.imgList}).on("swiped",function(e,i){t.current=i%t.length,t.index=i%t.length}),e>0&&this.swiper.go(e)},rerender:function(){var t=this;this.$el&&!this.hasRender&&(this.hasRender=!0,this.hasTwoLoopItem(),this.$nextTick(function(){t.index=t.value||0,t.current=t.value||0,t.length=t.list.length||t.$children.length,t.destroy(),t.render(t.value)}))},destroy:function(){this.hasRender=!1,this.swiper&&this.swiper.destroy()},getHeight:function(){var t=parseInt(this.height,10);return t?this.height:t?void 0:this.aspectRatio?this.$el.offsetWidth*this.aspectRatio+"px":"180px"}},props:{list:{type:Array,default:function(){return[]}},direction:{type:String,default:"horizontal"},showDots:{type:Boolean,default:!0},showDescMask:{type:Boolean,default:!0},dotsPosition:{type:String,default:"right"},dotsClass:String,auto:Boolean,loop:Boolean,interval:{type:Number,default:3e3},threshold:{type:Number,default:50},duration:{type:Number,default:300},height:{type:String,default:"auto"},aspectRatio:Number,minMovingDistance:{type:Number,default:0},value:{type:Number,default:0}},data:function(){return{hasRender:!1,current:this.index||0,xheight:"auto",length:this.list.length,index:0,listTwoLoopItem:[]}},watch:{auto:function(t){t?this.swiper&&this.swiper._auto():this.swiper&&this.swiper.stop()},list:function(t,e){s()(t)!==s()(e)&&this.rerender()},current:function(t){this.index=t,this.$emit("on-index-change",t)},index:function(t){var e=this;t!==this.current&&this.$nextTick(function(){e.swiper&&e.swiper.go(t)}),this.$emit("input",t)},value:function(t){this.index=t}},beforeDestroy:function(){this.destroy()}}),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-slider"},[i("div",{staticClass:"vux-swiper",style:{height:t.xheight}},[t._t("default"),t._v(" "),t._l(t.list,function(e,a){return i("div",{staticClass:"vux-swiper-item",attrs:{"data-index":a},on:{click:function(i){return t.clickListItem(e)}}},[i("a",{attrs:{href:"javascript:"}},[i("div",{staticClass:"vux-img",style:{backgroundImage:t.buildBackgroundUrl(e)}}),t._v(" "),t.showDescMask?i("p",{staticClass:"vux-swiper-desc"},[t._v(t._s(e.title))]):t._e()])])}),t._v(" "),t._l(t.listTwoLoopItem,function(e,a){return t.listTwoLoopItem.length>0?i("div",{staticClass:"vux-swiper-item vux-swiper-item-clone",attrs:{"data-index":a},on:{click:function(i){return t.clickListItem(e)}}},[i("a",{attrs:{href:"javascript:"}},[i("div",{staticClass:"vux-img",style:{backgroundImage:t.buildBackgroundUrl(e)}}),t._v(" "),t.showDescMask?i("p",{staticClass:"vux-swiper-desc"},[t._v(t._s(e.title))]):t._e()])]):t._e()})],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showDots,expression:"showDots"}],class:[t.dotsClass,"vux-indicator","vux-indicator-"+t.dotsPosition]},t._l(t.length,function(e){return i("a",{attrs:{href:"javascript:"}},[i("i",{staticClass:"vux-icon-dot",class:{active:e-1===t.current}})])}),0)])},u=[],d={render:c,staticRenderFns:u},h=d,p=i("VU/8"),m=a,f=p(l,h,!1,m,null,null);e.a=f.exports},gyMJ:function(t,e,i){"use strict";var a="http://api.facility.mymicedb.com/",n={userauth:a+"user/auth",devices:a+"devices",detail:a+"devices/",filters:a+"devices/filters",jsticket:a+"site/jsticket",jssign:a+"site/jssign",login:a+"user/weworklogin",userinfo:a+"user/view",redirect:a+"redirect",repair:a+"reports?device_id=",uploadimage:a+"site/upload",uploadimagebase64:a+"site/upload-image-base64",addrepair:a+"report/create",repairDetail:a+"reports/",repairComment:a+"comments?",weworkToken:a+"user/weworklogin",uploadimageserverId:a+"site/upload-image-serverid",addcomment:a+"comment/create",acceptReport:a+"report/accept",finishRepair:a+"repair/finish",closeReport:a+"report/finish",score:a+"score/create",maintains:a+"device/plan",maintain:a+"maintains",finishPlan:a+"maintain/finish",reportList:a+"reports",repairList:a+"repairs",autoCloseReport:a+"report/auto-close-report"};e.a=n},hqKk:function(t,e){},iIFr:function(t,e,i){"use strict";function a(t){i("tNMs")}var n=i("YxJB"),s=i("3Lt7"),o=(n.a,s.a,Object,{name:"DeviceCard",components:{Flexbox:n.a,FlexboxItem:s.a},props:{device:Object},data:function(){return{flexspan:2/3,hasImage:1,img_background:"",background_size:""}},mounted:function(){""===this.device.images?(this.hasImage=0,this.flexspan=0):(this.img_background='#ccc url("'+this.device.images+'") no-repeat center',this.background_size="auto 100%")}}),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("flexbox",{attrs:{gutter:0}},[i("flexbox-item",{attrs:{span:t.flexspan}},[i("div",{staticClass:"placeholder device-detail-info-bg"},[i("div",{staticClass:"weui-panel__bd device-detail-info"},[null!==t.device?i("div",{staticClass:"weui-media-box weui-media-box_text"},[i("h2",{staticClass:"weui-media-box__title"},[t._v(t._s(t.device.name))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s("类型："+t.device.category_name))]),t._v(" "),i("p",{staticClass:"weui-media-box__desc"},[t._v(t._s("出厂时间："+t.device.product_at_format))])]):t._e()])])]),t._v(" "),t.hasImage?i("flexbox-item",{staticStyle:{padding:"10px"}},[i("div",{staticClass:"placeholder"},[i("div",{style:{background:t.img_background,"background-size":t.background_size},attrs:{id:"img-bg"}})])]):t._e()],1)],1)},l=[],c={render:r,staticRenderFns:l},u=c,d=i("VU/8"),h=a,p=d(o,u,!1,h,"data-v-7ce0bc7e",null);e.a=p.exports},ifnV:function(t,e){},"j/tg":function(t,e){},jYbJ:function(t,e){},kbG3:function(t,e,i){"use strict";function a(t){i("3k2l")}var n={name:"inline-desc"},s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"vux-label-desc"},[t._t("default")],2)},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,null,null);e.a=d.exports},kllH:function(t,e){},mWsR:function(t,e){},mfyC:function(t,e){},mzja:function(t,e,i){"use strict";function a(t){i("55wj")}var n=i("/kga"),s=(n.a,Boolean,String,String,String,Boolean,String,String,Number,String,{name:"alert",components:{XDialog:n.a},created:function(){void 0!==this.value&&(this.showValue=this.value)},props:{value:Boolean,title:String,content:String,buttonText:String,hideOnBlur:{type:Boolean,default:!1},maskTransition:{type:String,default:"vux-mask"},dialogTransition:{type:String,default:"vux-dialog"},maskZIndex:[Number,String]},data:function(){return{showValue:!1}},methods:{_onHide:function(){this.showValue=!1}},watch:{value:function(t){this.showValue=t},showValue:function(t){this.$emit("input",t)}}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-alert"},[i("x-dialog",{attrs:{"mask-transition":t.maskTransition,"dialog-transition":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){return t.$emit("on-hide")},"on-show":function(e){return t.$emit("on-show")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[i("div",{staticClass:"weui-dialog__hd"},[i("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"weui-dialog__bd"},[t._t("default",[i("div",{domProps:{innerHTML:t._s(t.content)}})])],2),t._v(" "),i("div",{staticClass:"weui-dialog__ft"},[i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_primary",attrs:{href:"javascript:;"},on:{click:t._onHide}},[t._v(t._s(t.buttonText||"确定"))])])])],1)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},nnSp:function(t,e){},oWtu:function(t,e,i){"use strict";function a(t){i("2lnh")}var n=(String,Boolean,{name:"icon",props:{type:String,isMsg:Boolean},computed:{className:function(){return"weui-icon weui_icon_"+this.type+" weui-icon-"+this.type.replace(/_/g,"-")}}}),s=function(){var t=this,e=t.$createElement;return(t._self._c||e)("i",{class:[t.className,t.isMsg?"weui-icon_msg":""]})},o=[],r={render:s,staticRenderFns:o},l=r,c=i("VU/8"),u=a,d=c(n,l,!1,u,null,null);e.a=d.exports},owug:function(t,e){},qHQD:function(t,e){},qMt5:function(t,e,i){"use strict";function a(t){i("jYbJ")}function n(t){i("kllH")}function s(t){i("aiyf")}function o(t){i("/KGs")}var r=i("ABCa"),l=i("fBcm"),c=i("b+jt"),u=i("fZjL"),d=i.n(u),h=i("oWtu"),p=i("zV4+"),m=i("rHil"),f=i("kbG3"),v=i("KRg4"),g=i("ODCk"),_=(v.a,m.a,f.a,h.a,String,String,String,String,String,Number,Number,String,String,String,String,String,String,String,String,Boolean,Number,Number,String,String,String,Function,Boolean,Array,Array,Boolean,String,Function,Function,Object,{name:"datetime",mixins:[v.a],components:{Group:m.a,InlineDesc:f.a,Icon:h.a},props:{format:{type:String,default:"YYYY-MM-DD",validator:function(t){return!0}},title:String,value:{type:String,default:""},inlineDesc:String,placeholder:String,minYear:Number,maxYear:Number,confirmText:String,cancelText:String,clearText:String,yearRow:{type:String,default:"{value}"},monthRow:{type:String,default:"{value}"},dayRow:{type:String,default:"{value}"},hourRow:{type:String,default:"{value}"},minuteRow:{type:String,default:"{value}"},required:{type:Boolean,default:!1},minHour:{type:Number,default:0},maxHour:{type:Number,default:23},startDate:{type:String,validator:function(t){return!t||10===t.length}},endDate:{type:String,validator:function(t){return!t||10===t.length}},valueTextAlign:String,displayFormat:Function,readonly:Boolean,hourList:Array,minuteList:Array,show:Boolean,defaultSelectedValue:String,computeHoursFunction:Function,computeDaysFunction:Function,orderMap:Object},created:function(){this.isFirstSetValue=!1,this.currentValue=this.value},data:function(){return{currentShow:!1,currentValue:null,valid:!0,errors:{}}},mounted:function(){var t=this,e=this.uuid;this.$el.setAttribute("id","vux-datetime-"+e),this.readonly||this.$nextTick(function(){t.render(),t.show&&t.$nextTick(function(){t.picker&&t.picker.show(t.currentValue)})})},computed:{styles:function(){return this.$parent?{width:this.$parent.labelWidth,textAlign:this.$parent.labelAlign,marginRight:this.$parent.labelMarginRight}:{}},pickerOptions:function(){var t=this,e={trigger:"#vux-datetime-"+this.uuid,format:this.format,value:this.currentValue,output:".vux-datetime-value",confirmText:t.getButtonText("confirm"),cancelText:t.getButtonText("cancel"),clearText:t.clearText,yearRow:this.yearRow,monthRow:this.monthRow,dayRow:this.dayRow,hourRow:this.hourRow,minuteRow:this.minuteRow,minHour:this.minHour,maxHour:this.maxHour,startDate:this.startDate,endDate:this.endDate,hourList:this.hourList,minuteList:this.minuteList,defaultSelectedValue:this.defaultSelectedValue,computeHoursFunction:this.computeHoursFunction,computeDaysFunction:this.computeDaysFunction,orderMap:this.orderMap||{},onSelect:function(e,i,a){t.picker&&t.picker.config.renderInline&&(t.$emit("input",a),t.$emit("on-change",a))},onConfirm:function(e){t.currentValue=e},onClear:function(e){t.$emit("on-clear",e)},onHide:function(e){t.currentShow=!1,t.$emit("update:show",!1),t.validate(),t.$emit("on-hide",e),"cancel"===e&&t.$emit("on-cancel"),"confirm"===e&&setTimeout(function(){t.$nextTick(function(){t.$emit("on-confirm",t.value)})})},onShow:function(){t.currentShow=!0,t.$emit("update:show",!0),t.$emit("on-show")}};return this.minYear&&(e.minYear=this.minYear),this.maxYear&&(e.maxYear=this.maxYear),e},firstError:function(){var t=d()(this.errors)[0];return this.errors[t]},labelClass:function(){return this.$parent?{"vux-cell-justify":"justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign}:{}}},methods:{getButtonText:function(t){return"cancel"===t&&this.cancelText?this.cancelText:"confirm"===t&&this.confirmText?this.confirmText:this.$el.getAttribute("data-"+t+"-text")},render:function(){var t=this;this.$nextTick(function(){t.picker&&t.picker.destroy(),t.picker=new p.a(t.pickerOptions)})},validate:function(){if(!this.currentValue&&this.required)return this.valid=!1,void(this.errors.required="必填");this.valid=!0,this.errors={}}},watch:{readonly:function(t){t?this.picker&&this.picker.destroy():this.render()},show:function(t){t!==this.currentShow&&(t?this.picker&&this.picker.show(this.currentValue):this.picker&&this.picker.hide(this.currentValue))},currentValue:function(t,e){this.$emit("input",t),this.isFirstSetValue?this.$emit("on-change",t):(this.isFirstSetValue=!0,e&&this.$emit("on-change",t)),this.validate()},startDate:function(){this.render()},endDate:function(){this.render()},format:function(t){this.currentValue&&(this.currentValue=Object(g.a)(this.currentValue,t)),this.render()},value:function(t){if(this.readonly||this.picker&&this.picker.config.renderInline)return void(this.currentValue=t);this.currentValue!==t&&(this.currentValue=t,this.render())}},beforeDestroy:function(){this.picker&&this.picker.destroy()}}),w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"vux-datetime weui-cell",class:{"weui-cell_access":!t.readonly},attrs:{"data-cancel-text":"取消","data-confirm-text":"确定",href:"javascript:"}},[t._t("default",[i("div",[t._t("title",[i("p",{class:t.labelClass,style:t.styles,domProps:{innerHTML:t._s(t.title)}})]),t._v(" "),t.inlineDesc?i("inline-desc",[t._v(t._s(t.inlineDesc))]):t._e()],2),t._v(" "),i("div",{staticClass:"weui-cell__ft vux-cell-primary vux-datetime-value",style:{textAlign:t.valueTextAlign}},[!t.currentValue&&t.placeholder?i("span",{staticClass:"vux-cell-placeholder"},[t._v(t._s(t.placeholder))]):t._e(),t._v(" "),t.currentValue?i("span",{staticClass:"vux-cell-value"},[t._v(t._s(t.displayFormat?t.displayFormat(t.currentValue):t.currentValue))]):t._e(),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.valid,expression:"!valid"}],staticClass:"vux-input-icon",attrs:{type:"warn",title:t.firstError}})],1)])],2)},x=[],b={render:w,staticRenderFns:x},S=b,y=i("VU/8"),C=a,k=y(_,S,!1,C,null,null),$=k.exports,T=i("2sLL"),D=i("YxJB"),R=i("3Lt7"),V=i("62KO"),B=i("f6Hi"),I=i("xNvf"),O=(I.a,Boolean,Number,String,String,String,Boolean,String,String,{name:"toast",mixins:[I.a],props:{value:Boolean,time:{type:Number,default:2e3},type:{type:String,default:"success"},transition:String,width:{type:String,default:"7.6em"},isShowMask:{type:Boolean,default:!1},text:String,position:String},data:function(){return{show:!1}},created:function(){this.value&&(this.show=!0)},computed:{currentTransition:function(){return this.transition?this.transition:"top"===this.position?"vux-slide-from-top":"bottom"===this.position?"vux-slide-from-bottom":"vux-fade"},toastClass:function(){return{"weui-toast_forbidden":"warn"===this.type,"weui-toast_cancel":"cancel"===this.type,"weui-toast_success":"success"===this.type,"weui-toast_text":"text"===this.type,"vux-toast-top":"top"===this.position,"vux-toast-bottom":"bottom"===this.position,"vux-toast-middle":"middle"===this.position}},style:function(){if("text"===this.type&&"auto"===this.width)return{padding:"10px"}}},watch:{show:function(t){var e=this;t&&(this.$emit("input",!0),this.$emit("on-show"),this.fixSafariOverflowScrolling("auto"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.show=!1,e.$emit("input",!1),e.$emit("on-hide"),e.fixSafariOverflowScrolling("touch")},this.time))},value:function(t){this.show=t}}}),P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-toast"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowMask&&t.show,expression:"isShowMask && show"}],staticClass:"weui-mask_transparent"}),t._v(" "),i("transition",{attrs:{name:t.currentTransition}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"weui-toast",class:t.toastClass,style:{width:t.width}},[i("i",{directives:[{name:"show",rawName:"v-show",value:"text"!==t.type,expression:"type !== 'text'"}],staticClass:"weui-icon-success-no-circle weui-icon_toast"}),t._v(" "),t.text?i("p",{staticClass:"weui-toast__content",style:t.style,domProps:{innerHTML:t._s(t.text)}}):i("p",{staticClass:"weui-toast__content",style:t.style},[t._t("default")],2)])])],1)},F=[],E={render:P,staticRenderFns:F},j=E,N=i("VU/8"),L=n,M=N(O,j,!1,L,null,null),U=M.exports,A=i("2LX0"),H=i.n(A),q=i("Ewe+"),z=i.n(q),W=i("nror"),Y=i("lFEC"),X=i.n(Y),G={email:{fn:H.a,msg:"邮箱格式"},"china-mobile":{fn:function(t){return z()(t,"zh-CN")},msg:"手机号码"},"china-name":{fn:function(t){return t.length>=2&&t.length<=6},msg:"中文姓名"}},K=(B.a,h.a,f.a,String,String,String,String,Number,String,Boolean,Boolean,String,String,String,Function,Number,Number,Boolean,String,String,String,String,String,String,Boolean,String,Number,String,String,String,Boolean,{email:{fn:H.a,msg:"邮箱格式"},"china-mobile":{fn:function(t){return z()(t,"zh-CN")},msg:"手机号码"},"china-name":{fn:function(t){return t.length>=2&&t.length<=6},msg:"中文姓名"}}),J={name:"x-input",created:function(){var t=this;this.currentValue=void 0===this.value||null===this.value?"":this.mask?this.maskValue(this.value):this.value,!this.required||void 0!==this.currentValue&&""!==this.currentValue||(this.valid=!1),this.handleChangeEvent=!0,this.debounce&&(this._debounce=Object(W.a)(function(){t.$emit("on-change",t.currentValue)},this.debounce))},beforeMount:function(){this.$slots&&this.$slots["restricted-label"]&&(this.hasRestrictedLabel=!0),this.$slots&&this.$slots["right-full-height"]&&(this.hasRightFullHeightSlot=!0)},beforeDestroy:function(){this._debounce&&this._debounce.cancel(),window.removeEventListener("resize",this.scrollIntoView)},mixins:[B.a],components:{Icon:h.a,InlineDesc:f.a,Toast:U},props:{title:{type:String,default:""},type:{type:String,default:"text"},placeholder:String,value:[String,Number],name:String,readonly:Boolean,disabled:Boolean,keyboard:String,inlineDesc:String,isType:[String,Function],min:Number,max:Number,showClear:{type:Boolean,default:!0},equalWith:String,textAlign:String,autocomplete:{type:String,default:"off"},autocapitalize:{type:String,default:"off"},autocorrect:{type:String,default:"off"},spellcheck:{type:String,default:"false"},novalidate:{type:Boolean,default:!1},iconType:String,debounce:Number,placeholderAlign:String,labelWidth:String,mask:String,shouldToastError:{type:Boolean,default:!0}},computed:{labelStyles:function(){var t=this.$parent,e=void 0===t?{}:t;return{width:this.labelWidthComputed||e.labelWidth||this.labelWidthComputed,textAlign:e.labelAlign,marginRight:e.labelMarginRight}},labelClass:function(){return{"vux-cell-justify":this.$parent&&("justify"===this.$parent.labelAlign||"justify"===this.$parent.$parent.labelAlign)}},pattern:function(){if("number"===this.keyboard||"china-mobile"===this.isType)return"[0-9]*"},labelWidthComputed:function(){var t=this.title.replace(/[^x00-xff]/g,"00").length/2+1;if(t<10)return t+"em"},hasErrors:function(){return d()(this.errors).length>0},inputStyle:function(){if(this.textAlign)return{textAlign:this.textAlign}},showWarn:function(){return!this.novalidate&&!this.equalWith&&!this.valid&&this.firstError&&(this.touched||this.forceShowError)}},mounted:function(){window.addEventListener("resize",this.scrollIntoView)},methods:{scrollIntoView:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;/iphone/i.test(navigator.userAgent),"INPUT"!==document.activeElement.tagName&&"TEXTAREA"!==document.activeElement.tagName||setTimeout(function(){t.$refs.input.scrollIntoViewIfNeeded(!0)},e)},onClickErrorIcon:function(){this.shouldToastError&&this.firstError&&(this.showErrorToast=!0),this.$emit("on-click-error-icon",this.firstError)},maskValue:function(t){return this.mask?X.a.toPattern(t,this.mask):t},reset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.dirty=!1,this.currentValue=t,this.firstError="",this.valid=!0},clear:function(){this.currentValue="",this.focus(),this.$emit("on-click-clear-icon")},focus:function(){this.$refs.input.focus()},blur:function(){this.$refs.input.blur()},focusHandler:function(t){var e=this;this.$emit("on-focus",this.currentValue,t),this.isFocus=!0,setTimeout(function(){!e.$refs.input||e.$refs.input.scrollIntoViewIfNeeded(!1)},1e3)},onBlur:function(t){this.setTouched(),this.validate(),this.isFocus=!1,this.$emit("on-blur",this.currentValue,t)},onKeyUp:function(t){"Enter"===t.key&&(t.target.blur(),this.$emit("on-enter",this.currentValue,t))},getError:function(){var t=d()(this.errors)[0];this.firstError=this.errors[t]},validate:function(){if(void 0!==this.equalWith)return void this.validateEqual();if(this.errors={},!this.currentValue&&!this.required)return void(this.valid=!0);if(!this.currentValue&&this.required)return this.valid=!1,this.errors.required="必填哦",void this.getError();if("string"==typeof this.isType){var t=K[this.isType];if(t){var e=this.currentValue;if("china-mobile"===this.isType&&"999 9999 9999"===this.mask&&(e=this.currentValue.replace(/\s+/g,"")),this.valid=t.fn(e),!this.valid)return this.forceShowError=!0,this.errors.format=t.msg+"格式不对哦~",void this.getError();delete this.errors.format}}if("function"==typeof this.isType){var i=this.isType(this.currentValue);if(this.valid=i.valid,!this.valid)return this.errors.format=i.msg,this.forceShowError=!0,void this.getError();delete this.errors.format}if(this.min){if(this.currentValue.length<this.min)return this.errors.min="最少应该输入"+this.min+"个字符哦",this.valid=!1,void this.getError();delete this.errors.min}if(this.max){if(this.currentValue.length>this.max)return this.errors.max="最多可以输入"+this.max+"个字符哦",this.valid=!1,void(this.forceShowError=!0);this.forceShowError=!1,delete this.errors.max}this.valid=!0},validateEqual:function(){return!this.equalWith&&this.currentValue?(this.valid=!1,void(this.errors.equal="输入不一致")):(this.dirty||this.currentValue.length>=this.equalWith.length)&&this.currentValue!==this.equalWith?(this.valid=!1,void(this.errors.equal="输入不一致")):void(!this.currentValue&&this.required?this.valid=!1:(this.valid=!0,delete this.errors.equal))},_getInputMaskSelection:function(t,e,i,a){if(!this.mask||a&&0===e)return t;if(0===e&&(e=this.lastDirection),e>0){if(!this.mask.substr(t-e,1).match(/[9SA]/))return this._getInputMaskSelection(t+1,e,i,!0)}return t}},data:function(){return{hasRightFullHeightSlot:!1,hasRestrictedLabel:!1,firstError:"",forceShowError:!1,hasLengthEqual:!1,valid:!0,currentValue:"",showErrorToast:!1,isFocus:!1}},watch:{mask:function(t){t&&this.currentValue&&(this.currentValue=this.maskValue(this.currentValue))},valid:function(){this.getError()},value:function(t){this.currentValue=t},equalWith:function(t){t&&this.equalWith?(t.length===this.equalWith.length&&(this.hasLengthEqual=!0),this.validateEqual()):this.validate()},currentValue:function(t,e){var i=this,a=null;!this.equalWith&&t&&this.validateEqual(),t&&this.equalWith?(t.length===this.equalWith.length&&(this.hasLengthEqual=!0),this.validateEqual()):this.validate();try{a=this.$refs.input.selectionStart;var n=t.length-e.length;a=this._getInputMaskSelection(a,n,this.maskValue(t)),this.lastDirection=n}catch(t){}this.$emit("input",this.maskValue(t)),this.$nextTick(function(){i.$refs.input.selectionStart!==a&&(i.$refs.input.selectionStart=a,i.$refs.input.selectionEnd=a),i.currentValue!==i.maskValue(t)&&(i.currentValue=i.maskValue(t))}),this._debounce?this._debounce():this.$emit("on-change",t)}}},Q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-x-input weui-cell",class:{"weui-cell_warn":t.showWarn,disabled:t.disabled,"vux-x-input-has-right-full":t.hasRightFullHeightSlot}},[i("div",{staticClass:"weui-cell__hd"},[t.hasRestrictedLabel?i("div",{style:t.labelStyles},[t._t("restricted-label")],2):t._e(),t._v(" "),t._t("label",[t.title?i("label",{staticClass:"weui-label",class:t.labelClass,style:{width:t.labelWidth||t.$parent.labelWidth||t.labelWidthComputed,textAlign:t.$parent.labelAlign,marginRight:t.$parent.labelMarginRight},attrs:{for:"vux-x-input-"+t.uuid},domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t.inlineDesc?i("inline-desc",[t._v(t._s(t.inlineDesc))]):t._e()])],2),t._v(" "),i("div",{staticClass:"weui-cell__bd weui-cell__primary",class:t.placeholderAlign?"vux-x-input-placeholder-"+t.placeholderAlign:""},[t.type&&"text"!==t.type?t._e():i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",style:t.inputStyle,attrs:{id:"vux-x-input-"+t.uuid,maxlength:t.max,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,spellcheck:t.spellcheck,type:"text",name:t.name,pattern:t.pattern,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled},domProps:{value:t.currentValue},on:{focus:t.focusHandler,blur:t.onBlur,keyup:t.onKeyUp,input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}),t._v(" "),"number"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",style:t.inputStyle,attrs:{id:"vux-x-input-"+t.uuid,maxlength:t.max,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,spellcheck:t.spellcheck,type:"number",name:t.name,pattern:t.pattern,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled},domProps:{value:t.currentValue},on:{focus:t.focusHandler,blur:t.onBlur,keyup:t.onKeyUp,input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}):t._e(),t._v(" "),"email"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",style:t.inputStyle,attrs:{id:"vux-x-input-"+t.uuid,maxlength:t.max,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,spellcheck:t.spellcheck,type:"email",name:t.name,pattern:t.pattern,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled},domProps:{value:t.currentValue},on:{focus:t.focusHandler,blur:t.onBlur,keyup:t.onKeyUp,input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}):t._e(),t._v(" "),"password"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",style:t.inputStyle,attrs:{id:"vux-x-input-"+t.uuid,maxlength:t.max,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,spellcheck:t.spellcheck,type:"password",name:t.name,pattern:t.pattern,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled},domProps:{value:t.currentValue},on:{focus:t.focusHandler,blur:t.onBlur,keyup:t.onKeyUp,input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}):t._e(),t._v(" "),"tel"===t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentValue,expression:"currentValue"}],ref:"input",staticClass:"weui-input",style:t.inputStyle,attrs:{id:"vux-x-input-"+t.uuid,maxlength:t.max,autocomplete:t.autocomplete,autocapitalize:t.autocapitalize,autocorrect:t.autocorrect,spellcheck:t.spellcheck,type:"tel",name:t.name,pattern:t.pattern,placeholder:t.placeholder,readonly:t.readonly,disabled:t.disabled},domProps:{value:t.currentValue},on:{focus:t.focusHandler,blur:t.onBlur,keyup:t.onKeyUp,input:function(e){e.target.composing||(t.currentValue=e.target.value)}}}):t._e()]),t._v(" "),i("div",{staticClass:"weui-cell__ft"},[i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.hasRightFullHeightSlot&&!t.equalWith&&t.showClear&&""!==t.currentValue&&!t.readonly&&!t.disabled&&t.isFocus,expression:"!hasRightFullHeightSlot && !equalWith && showClear && currentValue !== '' && !readonly && !disabled && isFocus"}],attrs:{type:"clear"},nativeOn:{click:function(e){return t.clear(e)}}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:t.showWarn,expression:"showWarn"}],staticClass:"vux-input-icon",attrs:{type:"warn",title:t.valid?"":t.firstError},nativeOn:{click:function(e){return t.onClickErrorIcon(e)}}}),t._v(" "),!t.novalidate&&t.hasLengthEqual&&t.dirty&&t.equalWith&&!t.valid?i("icon",{staticClass:"vux-input-icon",attrs:{type:"warn"},nativeOn:{click:function(e){return t.onClickErrorIcon(e)}}}):t._e(),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:!t.novalidate&&t.equalWith&&t.equalWith===t.currentValue&&t.valid,expression:"!novalidate && equalWith && equalWith === currentValue && valid"}],attrs:{type:"success"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:t.novalidate&&"success"===t.iconType,expression:"novalidate && iconType === 'success'"}],staticClass:"vux-input-icon",attrs:{type:"success"}}),t._v(" "),i("icon",{directives:[{name:"show",rawName:"v-show",value:t.novalidate&&"error"===t.iconType,expression:"novalidate && iconType === 'error'"}],staticClass:"vux-input-icon",attrs:{type:"warn"}}),t._v(" "),t._t("right"),t._v(" "),t.hasRightFullHeightSlot?i("div",{staticClass:"vux-x-input-right-full"},[t._t("right-full-height")],2):t._e()],2),t._v(" "),i("toast",{attrs:{type:"text",width:"auto",time:600},model:{value:t.showErrorToast,callback:function(e){t.showErrorToast=e},expression:"showErrorToast"}},[t._v(t._s(t.firstError))])],1)},Z=[],tt={render:Q,staticRenderFns:Z},et=tt,it=i("VU/8"),at=s,nt=it(J,et,!1,at,null,null),st=nt.exports,ot=i("0xDb"),rt=i("gyMJ"),lt=i("iIFr"),ct=(r.a,l.a,c.a,T.a,D.a,R.a,V.a,lt.a,{name:"DeviceAddRepair",components:{XHeader:r.a,Swiper:l.a,SwiperItem:c.a,Datetime:$,XButton:T.a,Flexbox:D.a,FlexboxItem:R.a,Confirm:V.a,DeviceCard:lt.a,XInput:st},mounted:function(){this.initWxConfig(),this.device_id=this.$route.query.device_id,this.device_id<=0&&window.history.go(-1),this.getDevice(this.device_id)},data:function(){return{demo01_index:0,demo01_list:[],value1:Object(g.a)(new Date,"YYYY-MM-DD"),device_id:"",text:"",fullWidth:document.documentElement.clientWidth,wx_config_data:{},previews:[],localIds:[],confirm:!1,error_msg:"",device:null,reporterName:""}},methods:{initWxConfig:function(){var t=this,e=window.location.href;this.axios.get(rt.a.jssign+"?url="+e).then(function(e){console.log("getJssign Api",e.data),t.wx_config_data.time_stamp=e.data.data.timestamp,t.wx_config_data.noncestr=e.data.data.nonce_str,t.wx_config_data.signature=e.data.data.signature,t.$wechat.config({beta:!0,debug:!1,appId:"wwa417d520fd30a759",timestamp:t.wx_config_data.time_stamp,nonceStr:t.wx_config_data.noncestr,signature:t.wx_config_data.signature,jsApiList:["getLocalImgData","chooseImage"]})})},log:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";console.log(t,e)},demo01_onIndexChange:function(t){this.demo01_index=t},change:function(t){console.log("change",t)},onConfirm:function(t){this.confirm=!1},showConfirm:function(){var t=this;this.confirm=!0,setTimeout(function(){t.confirm=!1},3e3)},clickAddImage:function(){var t=this;t.$wechat.chooseImage({count:5,sizeType:["original","compressed"],sourceType:["album","camera"],defaultCameraMode:"batch",success:function(e){t.localIds=e.localIds,t.uploadImage(t.localIds.shift())},fail:function(t){}})},clickSubmit:function(){if(""===this.text)return this.error_msg="请填写描述",void this.showConfirm();if(this.previews.length>5)return this.error_msg="图片最多传5张",void this.showConfirm();var t=this,e=new FormData;if(e.append("device_id",this.device_id),e.append("description",this.text),e.append("time",this.value1),e.append("real_reporter",this.reporterName),this.previews.length>0){for(var i="",a=0;a<this.previews.length;a++)i=""===i?this.previews[a].filekey:i+","+this.previews[a].filekey;e.append("images",i)}var n=rt.a.addrepair+"?token="+window.localStorage.getItem("token");console.log(n),ot.a.post(n,e,function(e){t.error_msg="成功",t.showConfirm(),setTimeout(function(){t.$router.go(-1)},3e3)})},getDevice:function(t){ot.a.get(rt.a.detail+t,this.loadData)},loadData:function(t){console.log("1111",t),this.device=t.data,this.demo01_list=[{url:"javascript:",img:this.device.images}]},uploadImage:function(t){var e=this;e.$vux.loading.show({transition:"",text:"图片上传中..."}),e.$wechat.getLocalImgData({localId:t,success:function(t){var i=t.localData,a=i,n=new FormData;n.append("filedata",a),e.axios.post(rt.a.uploadimagebase64,n).then(function(t){e.previews.push(t.data),e.localIds.length>0&&e.uploadImage(e.localIds.shift())}).catch(function(t){console.log(t),alert(t)}).finally()},fail:function(i){console.log(i),e.$wechat.uploadImage({localId:t,isShowProgressTips:1,success:function(t){var i=t.serverId,a=new FormData;a.append("server_id",i),e.axios.post(rt.a.uploadimageserverId,a).then(function(t){e.previews.push(t.data),e.localIds.length>0&&e.uploadImage(e.localIds.shift())}).catch(function(t){console.log(t),alert(t)}).finally()}})}}),e.$vux.loading.hide()},removeImage:function(t){for(var e=this.previews.length-1;e>=0;e--)this.previews[e].filekey===t&&this.previews.splice(e,1)}}}),ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("x-header",[t._v("报修")]),t._v(" "),i("div",{staticClass:"device-info"},[t.device?i("device-card",{attrs:{device:t.device}}):t._e()],1),t._v(" "),i("datetime",{attrs:{title:"报修日期",readonly:!0},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v(" "),i("div",{staticStyle:{margin:"0px","text-align":"center",padding:"15px"}},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticClass:"repair-content",attrs:{placeholder:"请输入报修内容"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}},[t._v(t._s(this.text))])]),t._v(" "),i("div",[i("x-input",{attrs:{title:"实际报修人",min:2,max:6,"is-type":"china-name",placeholder:"姓名"},model:{value:t.reporterName,callback:function(e){t.reporterName=e},expression:"reporterName"}})],1),t._v(" "),i("div",{staticClass:"image-list"},[i("flexbox",{attrs:{gutter:10,wrap:"wrap"}},[t._l(t.previews,function(e){return i("flexbox-item",{key:e.filekey,staticClass:"upload-image",attrs:{span:2/9}},[i("img",{directives:[{name:"gallery",rawName:"v-gallery",value:"group2",expression:"'group2'"}],attrs:{src:e.fileurl},on:{click:function(i){return t.removeImage(e.filekey)}}})])}),t._v(" "),i("flexbox-item",{staticClass:"upload-image",attrs:{span:2/9}},[this.previews.length<5?i("div",{attrs:{id:"add-image"},on:{click:t.clickAddImage}},[i("span",[t._v("+")])]):t._e()])],2)],1),t._v(" "),i("div",{staticStyle:{margin:"15px"}},[i("x-button",{nativeOn:{click:function(e){return t.clickSubmit(e)}}},[t._v("提交")])],1),t._v(" "),i("confirm",{attrs:{"close-on-confirm":!1,title:t.$t("提示"),"show-cancel-button":!1},on:{"on-confirm":t.onConfirm},model:{value:t.confirm,callback:function(e){t.confirm=e},expression:"confirm"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v(t._s(this.error_msg))])])],1)},dt=[],ht={render:ut,staticRenderFns:dt},pt=ht,mt=i("VU/8"),ft=o,vt=mt(ct,pt,!1,ft,"data-v-db1380dc",null);e.a=vt.exports},rHil:function(t,e,i){"use strict";function a(t){i("qHQD")}var n=i("wmxo"),s=(n.a,String,String,String,String,String,String,Number,String,String,{name:"group",methods:{cleanStyle:n.a},props:{title:String,titleColor:String,labelWidth:String,labelAlign:String,labelMarginRight:String,gutter:[String,Number],footerTitle:String,footerTitleColor:String}}),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.title?i("div",{staticClass:"weui-cells__title",style:t.cleanStyle({color:t.titleColor}),domProps:{innerHTML:t._s(t.title)}}):t._e(),t._v(" "),t._t("title"),t._v(" "),i("div",{staticClass:"weui-cells",class:{"vux-no-group-title":!t.title},style:t.cleanStyle({marginTop:"number"==typeof t.gutter?t.gutter+"px":t.gutter})},[t._t("after-title"),t._v(" "),t._t("default")],2),t._v(" "),t.footerTitle?i("div",{staticClass:"weui-cells__title vux-group-footer-title",style:t.cleanStyle({color:t.footerTitleColor}),domProps:{innerHTML:t._s(t.footerTitle)}}):t._e()],2)},r=[],l={render:o,staticRenderFns:r},c=l,u=i("VU/8"),d=a,h=u(s,c,!1,d,null,null);e.a=h.exports},seeO:function(t,e){},spwv:function(t,e){},tNMs:function(t,e){},uGHa:function(t,e){},vugk:function(t,e){},"wJQ+":function(t,e){},wPer:function(t,e){},xpjF:function(t,e){},yoq6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4d1f4c3cf62ec142f26a.js.map